<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>SE-0132 Rationalizing Sequence end-operation names - Swift Evolution List</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>SE-0132 Rationalizing Sequence end-operation names | Swift Evolution List</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="SE-0132 Rationalizing Sequence end-operation names" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Yuhuu!" /> <meta property="og:description" content="Yuhuu!" /> <link rel="canonical" href="http://localhost:4000/docs/2019-08-26-0132-sequence-end-ops.html" /> <meta property="og:url" content="http://localhost:4000/docs/2019-08-26-0132-sequence-end-ops.html" /> <meta property="og:site_name" content="Swift Evolution List" /> <script type="application/ld+json"> {"url":"http://localhost:4000/docs/2019-08-26-0132-sequence-end-ops.html","headline":"SE-0132 Rationalizing Sequence end-operation names","description":"Yuhuu!","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight">Swift Evolution List</a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="http://localhost:4000/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="http://localhost:4000/" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="http://localhost:4000/about/" class="navigation-list-link">About</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0001-keywords-as-argument-labels.html" class="navigation-list-link">SE-0001 Allow (most) keywords as argument labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0002-remove-currying.html" class="navigation-list-link">SE-0002 Removing currying `func` declaration syntax</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0003-remove-var-parameters.html" class="navigation-list-link">SE-0003 Removing `var` from Function Parameters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0004-remove-pre-post-inc-decrement.html" class="navigation-list-link">SE-0004 Remove the `++` and `--` operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0005-objective-c-name-translation.html" class="navigation-list-link">SE-0005 Better Translation of Objective-C APIs Into Swift</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0006-apply-api-guidelines-to-the-standard-library.html" class="navigation-list-link">SE-0006 Apply API Guidelines to the Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0007-remove-c-style-for-loops.html" class="navigation-list-link">SE-0007 Remove C-style for-loops with conditions and incrementers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0008-lazy-flatmap-for-optionals.html" class="navigation-list-link">SE-0008 Add a Lazy flatMap for Sequences of Optionals #</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0009-require-self-for-accessing-instance-members.html" class="navigation-list-link">SE-0009 Require self for accessing instance members</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0010-add-staticstring-unicodescalarview.html" class="navigation-list-link">SE-0010 Add StaticString.UnicodeScalarView</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0011-replace-typealias-associated.html" class="navigation-list-link">SE-0011 Replace `typealias` keyword with `associatedtype` for associated type declarations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0012-add-noescape-to-public-library-api.html" class="navigation-list-link">SE-0012 Add `@noescape` to public library API</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0013-remove-partial-application-super.html" class="navigation-list-link">SE-0013 Remove Partial Application of Non-Final Super Methods (Swift 2.2)</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0014-constrained-AnySequence.html" class="navigation-list-link">SE-0014 Constraining `AnySequence.init`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0015-tuple-comparison-operators.html" class="navigation-list-link">SE-0015 Tuple comparison operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0016-initializers-for-converting-unsafe-pointers-to-ints.html" class="navigation-list-link">SE-0016 Add initializers to Int and UInt to convert from UnsafePointer and UnsafeMutablePointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0017-convert-unmanaged-to-use-unsafepointer.html" class="navigation-list-link">SE-0017 Change `Unmanaged` to use `UnsafePointer`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0018-flexible-memberwise-initialization.html" class="navigation-list-link">SE-0018 Flexible Memberwise Initialization</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0019-package-manager-testing.html" class="navigation-list-link">SE-0019 Swift Testing</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0020-if-swift-version.html" class="navigation-list-link">SE-0020 Swift Language Version Build Configuration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0021-generalized-naming.html" class="navigation-list-link">SE-0021 Naming Functions with Argument Labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0022-objc-selectors.html" class="navigation-list-link">SE-0022 Referencing the Objective-C selector of a method</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0023-api-guidelines.html" class="navigation-list-link">SE-0023 API Design Guidelines</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0024-optional-value-setter.html" class="navigation-list-link">SE-0024 Optional Value Setter `??=`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0025-scoped-access-level.html" class="navigation-list-link">SE-0025 Scoped Access Level</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0026-abstract-classes-and-methods.html" class="navigation-list-link">SE-0026 Abstract classes and methods</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0027-string-from-code-units.html" class="navigation-list-link">SE-0027 Expose code unit initializers on String</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0028-modernizing-debug-identifiers.html" class="navigation-list-link">SE-0028 Modernizing Swift's Debugging Identifiers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0029-remove-implicit-tuple-splat.html" class="navigation-list-link">SE-0029 Remove implicit tuple splat behavior from function applications</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0030-property-behavior-decls.html" class="navigation-list-link">SE-0030 Property Behaviors</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0031-adjusting-inout-declarations.html" class="navigation-list-link">SE-0031 Adjusting `inout` Declarations for Type Decoration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0032-sequencetype-find.html" class="navigation-list-link">SE-0032 Add `first(where:)` method to `Sequence`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0033-import-objc-constants.html" class="navigation-list-link">SE-0033 Import Objective-C Constants as Swift Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0034-disambiguating-line.html" class="navigation-list-link">SE-0034 Disambiguating Line Control Statements from Debugging Identifiers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0035-limit-inout-capture.html" class="navigation-list-link">SE-0035 Limiting `inout` capture to `@noescape` contexts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0036-enum-dot.html" class="navigation-list-link">SE-0036 Requiring Leading Dot Prefixes for Enum Instance Member Implementations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0037-clarify-comments-and-operators.html" class="navigation-list-link">SE-0037 Clarify interaction between comments & operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0038-swiftpm-c-language-targets.html" class="navigation-list-link">SE-0038 Package Manager C Language Target Support</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0039-playgroundliterals.html" class="navigation-list-link">SE-0039 Modernizing Playground Literals</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0040-attributecolons.html" class="navigation-list-link">SE-0040 Replacing Equal Signs with Colons For Attribute Arguments</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0041-conversion-protocol-conventions.html" class="navigation-list-link">SE-0041 Updating Protocol Naming Conventions for Conversions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0042-flatten-method-types.html" class="navigation-list-link">SE-0042 Flattening the function type of unapplied method references</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0043-declare-variables-in-case-labels-with-multiple-patterns.html" class="navigation-list-link">SE-0043 Declare variables in 'case' labels with multiple patterns </a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0044-import-as-member.html" class="navigation-list-link">SE-0044 Import as member</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0045-scan-takewhile-dropwhile.html" class="navigation-list-link">SE-0045 Add prefix(while:) and drop(while:) to the stdlib</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0046-first-label.html" class="navigation-list-link">SE-0046 Establish consistent label behavior across all parameters including first labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0047-nonvoid-warn.html" class="navigation-list-link">SE-0047 Defaulting non-Void functions so they warn on unused results</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0048-generic-typealias.html" class="navigation-list-link">SE-0048 Generic Type Aliases</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0049-noescape-autoclosure-type-attrs.html" class="navigation-list-link">SE-0049 Move @noescape and @autoclosure to be type attributes</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0050-floating-point-stride.html" class="navigation-list-link">SE-0050 Decoupling Floating Point Strides from Generic Implementations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0051-stride-semantics.html" class="navigation-list-link">SE-0051 Conventionalizing `stride` semantics</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0052-iterator-post-nil-guarantee.html" class="navigation-list-link">SE-0052 Change IteratorType post-nil guarantee</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0053-remove-let-from-function-parameters.html" class="navigation-list-link">SE-0053 Remove explicit use of `let` from Function Parameters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0054-abolish-iuo.html" class="navigation-list-link">SE-0054 Abolish `ImplicitlyUnwrappedOptional` type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0055-optional-unsafe-pointers.html" class="navigation-list-link">SE-0055 Make unsafe pointer nullability explicit using Optional</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0056-trailing-closures-in-guard.html" class="navigation-list-link">SE-0056 Allow trailing closures in `guard` conditions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0057-importing-objc-generics.html" class="navigation-list-link">SE-0057 Importing Objective-C Lightweight Generics</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0058-objectivecbridgeable.html" class="navigation-list-link">SE-0058 Allow Swift types to provide custom Objective-C representations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0059-updated-set-apis.html" class="navigation-list-link">SE-0059 Update API Naming Guidelines and Rewrite Set APIs Accordingly</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0060-defaulted-parameter-order.html" class="navigation-list-link">SE-0060 Enforcing order of defaulted parameters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0061-autoreleasepool-signature.html" class="navigation-list-link">SE-0061 Add Generic Result and Error Handling to autoreleasepool()</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0062-objc-keypaths.html" class="navigation-list-link">SE-0062 Referencing Objective-C key-paths</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0063-swiftpm-system-module-search-paths.html" class="navigation-list-link">SE-0063 SwiftPM System Module Search Paths</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0064-property-selectors.html" class="navigation-list-link">SE-0064 Referencing the Objective-C selector of property getters and setters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0065-collections-move-indices.html" class="navigation-list-link">SE-0065 A New Model for Collections and Indices</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0066-standardize-function-type-syntax.html" class="navigation-list-link">SE-0066 Standardize function type argument syntax to require parentheses</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0067-floating-point-protocols.html" class="navigation-list-link">SE-0067 Enhanced Floating Point Protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0068-universal-self.html" class="navigation-list-link">SE-0068 Expanding Swift `Self` to class members and value types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0069-swift-mutability-for-foundation.html" class="navigation-list-link">SE-0069 Mutability and Foundation Value Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0070-optional-requirements.html" class="navigation-list-link">SE-0070 Make Optional Requirements Objective-C-only</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0071-member-keywords.html" class="navigation-list-link">SE-0071 Allow (most) keywords in member references</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0072-eliminate-implicit-bridging-conversions.html" class="navigation-list-link">SE-0072 Fully eliminate implicit bridging conversions from Swift</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0073-noescape-once.html" class="navigation-list-link">SE-0073 Marking closures as executing exactly once</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0074-binary-search.html" class="navigation-list-link">SE-0074 Implementation of Binary Search functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0075-import-test.html" class="navigation-list-link">SE-0075 Adding a Build Configuration Import Test</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0076-copying-to-unsafe-mutable-pointer-with-unsafe-pointer-source.html" class="navigation-list-link">SE-0076 Add overrides taking an UnsafePointer source to non-destructive copying methods on UnsafeMutablePointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0077-operator-precedence.html" class="navigation-list-link">SE-0077 Improved operator declarations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0078-rotate-algorithm.html" class="navigation-list-link">SE-0078 Implement a rotate algorithm, equivalent to std::rotate() in C++</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0079-upgrade-self-from-weak-to-strong.html" class="navigation-list-link">SE-0079 Allow using optional binding to upgrade `self` from a weak to strong reference</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0080-failable-numeric-initializers.html" class="navigation-list-link">SE-0080 Failable Numeric Conversion Initializers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0081-move-where-expression.html" class="navigation-list-link">SE-0081 Move `where` clause to end of declaration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0082-swiftpm-package-edit.html" class="navigation-list-link">SE-0082 Package Manager Editable Packages</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0083-remove-bridging-from-dynamic-casts.html" class="navigation-list-link">SE-0083 Remove bridging conversion behavior from dynamic casts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0084-trailing-commas.html" class="navigation-list-link">SE-0084 Allow trailing commas in parameter lists and tuples</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0085-package-manager-command-name.html" class="navigation-list-link">SE-0085 Package Manager Command Names</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0086-drop-foundation-ns.html" class="navigation-list-link">SE-0086 Drop NS Prefix in Swift Foundation</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0087-lazy-attribute.html" class="navigation-list-link">SE-0087 Rename `lazy` to `@lazy`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0088-libdispatch-for-swift3.html" class="navigation-list-link">SE-0088 Modernize libdispatch for Swift 3 naming conventions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0089-rename-string-reflection-init.html" class="navigation-list-link">SE-0089 Renaming `String.init<T>(_: T)`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0090-remove-dot-self.html" class="navigation-list-link">SE-0090 Remove `.self` and freely allow type references in expressions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0091-improving-operators-in-protocols.html" class="navigation-list-link">SE-0091 Improving operator requirements in protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0092-typealiases-in-protocols.html" class="navigation-list-link">SE-0092 Typealiases in protocols and protocol extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0093-slice-base.html" class="navigation-list-link">SE-0093 Adding a public `base` property to slices</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0094-sequence-function.html" class="navigation-list-link">SE-0094 Add sequence(first:next:) and sequence(state:next:) to the stdlib</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0095-any-as-existential.html" class="navigation-list-link">SE-0095 Replace `protocol<P1,P2>` syntax with `P1 & P2` syntax</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0096-dynamictype.html" class="navigation-list-link">SE-0096 Converting `dynamicType` from a property to an operator</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0097-negative-attributes.html" class="navigation-list-link">SE-0097 Normalizing naming for "negative" attributes</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0098-didset-capitalization.html" class="navigation-list-link">SE-0098 Lowercase `didSet` and `willSet` for more consistent keyword casing</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0099-conditionclauses.html" class="navigation-list-link">SE-0099 Restructuring Condition Clauses</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0100-add-sequence-based-init-and-merge-to-dictionary.html" class="navigation-list-link">SE-0100 Add sequence-based initializers and merge methods to Dictionary</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0101-standardizing-sizeof-naming.html" class="navigation-list-link">SE-0101 Reconfiguring `sizeof` and related functions into a unified `MemoryLayout` struct</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0102-noreturn-bottom-type.html" class="navigation-list-link">SE-0102 Remove `@noreturn` attribute and introduce an empty `Never` type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0103-make-noescape-default.html" class="navigation-list-link">SE-0103 Make non-escaping closures the default</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0104-improved-integers.html" class="navigation-list-link">SE-0104 Protocol-oriented integers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0105-remove-where-from-forin-loops.html" class="navigation-list-link">SE-0105 Removing Where Clauses from For-In Loops</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0106-rename-osx-to-macos.html" class="navigation-list-link">SE-0106 Add a `macOS` Alias for the `OSX` Platform Configuration Test</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0107-unsaferawpointer.html" class="navigation-list-link">SE-0107 UnsafeRawPointer API</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0108-remove-assoctype-inference.html" class="navigation-list-link">SE-0108 Remove associated type inference</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0109-remove-boolean.html" class="navigation-list-link">SE-0109 Remove the `Boolean` protocol </a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0110-distingish-single-tuple-arg.html" class="navigation-list-link">SE-0110 Distinguish between single-tuple and multiple-argument function types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0111-remove-arg-label-type-significance.html" class="navigation-list-link">SE-0111 Remove type system significance of function argument labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0112-nserror-bridging.html" class="navigation-list-link">SE-0112 Improved NSError Bridging</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0113-rounding-functions-on-floatingpoint.html" class="navigation-list-link">SE-0113 Add integral rounding functions to FloatingPoint</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0114-buffer-naming.html" class="navigation-list-link">SE-0114 Updating Buffer "Value" Names to "Header" Names</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0115-literal-syntax-protocols.html" class="navigation-list-link">SE-0115 Rename Literal Syntax Protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0116-id-as-any.html" class="navigation-list-link">SE-0116 Import Objective-C `id` as Swift `Any` type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0117-non-public-subclassable-by-default.html" class="navigation-list-link">SE-0117 Allow distinguishing between public access and public overridability</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0118-closure-parameter-names-and-labels.html" class="navigation-list-link">SE-0118 Closure Parameter Names and Labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0119-extensions-access-modifiers.html" class="navigation-list-link">SE-0119 Remove access modifiers from extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0120-revise-partition-method.html" class="navigation-list-link">SE-0120 Revise `partition` Method Signature</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0121-remove-optional-comparison-operators.html" class="navigation-list-link">SE-0121 Remove `Optional` Comparison Operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0122-use-colons-for-subscript-type-declarations.html" class="navigation-list-link">SE-0122 Use colons for subscript declarations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0123-disallow-value-to-optional-coercion-in-operator-arguments.html" class="navigation-list-link">SE-0123 Disallow coercion to optionals in operator arguments</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0124-bitpattern-label-for-int-initializer-objectidentfier.html" class="navigation-list-link">SE-0124 `Int.init(ObjectIdentifier)` and `UInt.init(ObjectIdentifier)` should have a `bitPattern:` label</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0125-remove-nonobjectivecbase.html" class="navigation-list-link">SE-0125 Remove `NonObjectiveCBase` and `isUniquelyReferenced`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0126-refactor-metatypes-repurpose-t-dot-self-and-mirror.html" class="navigation-list-link">SE-0126 Refactor Metatypes, repurpose `T.self` and `Mirror`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0127-cleaning-up-stdlib-ptr-buffer.html" class="navigation-list-link">SE-0127 Cleaning up stdlib Pointer and Buffer Routines</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0128-unicodescalar-failable-initializer.html" class="navigation-list-link">SE-0128 Change failable UnicodeScalar initializers to failable</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0129-package-manager-test-naming-conventions.html" class="navigation-list-link">SE-0129 Package Manager Test Naming Conventions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0130-string-initializers-cleanup.html" class="navigation-list-link">SE-0130 Replace repeating `Character` and `UnicodeScalar` forms of String.init</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0131-anyhashable.html" class="navigation-list-link">SE-0131 Add `AnyHashable` to the standard library</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/docs/2019-08-26-0132-sequence-end-ops.html" class="navigation-list-link active">SE-0132 Rationalizing Sequence end-operation names</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0133-rename-flatten-to-joined.html" class="navigation-list-link">SE-0133 Rename `flatten()` to `joined()`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0134-rename-string-properties.html" class="navigation-list-link">SE-0134 Rename two UTF8-related properties on String</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0135-package-manager-support-for-differentiating-packages-by-swift-version.html" class="navigation-list-link">SE-0135 Package Manager Support for Differentiating Packages by Swift version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0136-memory-layout-of-values.html" class="navigation-list-link">SE-0136 Memory layout of values</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0137-avoiding-lock-in.html" class="navigation-list-link">SE-0137 Avoiding Lock-In to Legacy Protocol Designs</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0138-unsaferawbufferpointer.html" class="navigation-list-link">SE-0138 UnsafeRawBufferPointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0139-bridge-nsnumber-and-nsvalue.html" class="navigation-list-link">SE-0139 Bridge Numeric Types to `NSNumber` and Cocoa Structs to `NSValue`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0140-bridge-optional-to-nsnull.html" class="navigation-list-link">SE-0140 Warn when `Optional` converts to `Any`, and bridge `Optional` As Its Payload Or `NSNull`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0141-available-by-swift-version.html" class="navigation-list-link">SE-0141 Availability by Swift version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0142-associated-types-constraints.html" class="navigation-list-link">SE-0142 Permit where clauses to constrain associated types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0143-conditional-conformances.html" class="navigation-list-link">SE-0143 Conditional conformances</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0144-allow-single-dollar-sign-as-valid-identifier.html" class="navigation-list-link">SE-0144 Allow Single Dollar Sign as a Valid Identifier</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0145-package-manager-version-pinning.html" class="navigation-list-link">SE-0145 Package Manager Version Pinning</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0146-package-manager-product-definitions.html" class="navigation-list-link">SE-0146 Package Manager Product Definitions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0147-move-unsafe-initialize-from.html" class="navigation-list-link">SE-0147 Move UnsafeMutablePointer.initialize(from:) to UnsafeMutableBufferPointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0148-generic-subscripts.html" class="navigation-list-link">SE-0148 Generic Subscripts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0149-package-manager-top-of-tree.html" class="navigation-list-link">SE-0149 Package Manager Support for Top of Tree development</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0150-package-manager-branch-support.html" class="navigation-list-link">SE-0150 Package Manager Support for branches</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0151-package-manager-swift-language-compatibility-version.html" class="navigation-list-link">SE-0151 Package Manager Swift Language Compatibility Version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0152-package-manager-tools-version.html" class="navigation-list-link">SE-0152 Package Manager Tools Version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0153-compensate-for-the-inconsistency-of-nscopyings-behaviour.html" class="navigation-list-link">SE-0153 Compensate for the inconsistency of `@NSCopying`'s behaviour</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0154-dictionary-key-and-value-collections.html" class="navigation-list-link">SE-0154 Provide Custom Collections for Dictionary Keys and Values</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0155-normalize-enum-case-representation.html" class="navigation-list-link">SE-0155 Normalize Enum Case Representation</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0156-subclass-existentials.html" class="navigation-list-link">SE-0156 Class and Subtype existentials</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0157-recursive-protocol-constraints.html" class="navigation-list-link">SE-0157 Support recursive constraints on associated types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0158-package-manager-manifest-api-redesign.html" class="navigation-list-link">SE-0158 Package Manager Manifest API Redesign</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0159-fix-private-access-levels.html" class="navigation-list-link">SE-0159 Fix Private Access Levels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0160-objc-inference.html" class="navigation-list-link">SE-0160 Limiting `@objc` inference</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0161-key-paths.html" class="navigation-list-link">SE-0161 Smart KeyPaths: Better Key-Value Coding for Swift</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0162-package-manager-custom-target-layouts.html" class="navigation-list-link">SE-0162 Package Manager Custom Target Layouts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0163-string-revision-1.html" class="navigation-list-link">SE-0163 String Revision: Collection Conformance, C Interop, Transcoding</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0164-remove-final-support-in-protocol-extensions.html" class="navigation-list-link">SE-0164 Remove final support in protocol extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0165-dict.html" class="navigation-list-link">SE-0165 Dictionary & Set Enhancements</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0166-swift-archival-serialization.html" class="navigation-list-link">SE-0166 Swift Archival & Serialization</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0167-swift-encoders.html" class="navigation-list-link">SE-0167 Swift Encoders</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0168-multi-line-string-literals.html" class="navigation-list-link">SE-0168 Multi-Line String Literals</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0169-improve-interaction-between-private-declarations-and-extensions.html" class="navigation-list-link">SE-0169 Improve Interaction Between `private` Declarations and Extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0170-nsnumber_bridge.html" class="navigation-list-link">SE-0170 NSNumber bridging and Numeric types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0171-reduce-with-inout.html" class="navigation-list-link">SE-0171 Reduce with `inout`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0172-one-sided-ranges.html" class="navigation-list-link">SE-0172 One-sided Ranges</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0173-swap-indices.html" class="navigation-list-link">SE-0173 Add `MutableCollection.swapAt(_:_:)`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0174-filter-range-replaceable.html" class="navigation-list-link">SE-0174 Change `filter` to return an associated type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0175-package-manager-revised-dependency-resolution.html" class="navigation-list-link">SE-0175 Package Manager Revised Dependency Resolution</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0176-enforce-exclusive-access-to-memory.html" class="navigation-list-link">SE-0176 Enforce Exclusive Access to Memory</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0177-add-clamped-to-method.html" class="navigation-list-link">SE-0177 Add clamp(to:) to the stdlib</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0178-character-unicode-view.html" class="navigation-list-link">SE-0178 Add `unicodeScalars` property to `Character`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0179-swift-run-command.html" class="navigation-list-link">SE-0179 Swift `run` Command</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0180-string-index-overhaul.html" class="navigation-list-link">SE-0180 String Index Overhaul</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0181-package-manager-cpp-language-version.html" class="navigation-list-link">SE-0181 Package Manager C/C++ Language Standard Support</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0182-newline-escape-in-strings.html" class="navigation-list-link">SE-0182 String Newline Escaping</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0183-substring-affordances.html" class="navigation-list-link">SE-0183 Substring performance affordances</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0184-unsafe-pointers-add-missing.html" class="navigation-list-link">SE-0184 Unsafe[Mutable][Raw][Buffer]Pointer: add missing methods, adjust existing labels for clarity, and remove deallocation size</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0185-synthesize-equatable-hashable.html" class="navigation-list-link">SE-0185 Synthesizing `Equatable` and `Hashable` conformance</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0186-remove-ownership-keyword-support-in-protocols.html" class="navigation-list-link">SE-0186 Remove ownership keyword support in protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0187-introduce-filtermap.html" class="navigation-list-link">SE-0187 Introduce Sequence.compactMap(_:)</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0188-stdlib-index-types-hashable.html" class="navigation-list-link">SE-0188 Make Standard Library Index Types Hashable</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0189-restrict-cross-module-struct-initializers.html" class="navigation-list-link">SE-0189 Restrict Cross-module Struct Initializers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0190-target-environment-platform-condition.html" class="navigation-list-link">SE-0190 Target environment platform condition</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0191-eliminate-indexdistance.html" class="navigation-list-link">SE-0191 Eliminate `IndexDistance` from `Collection`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0192-non-exhaustive-enums.html" class="navigation-list-link">SE-0192 Handling Future Enum Cases</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0193-cross-module-inlining-and-specialization.html" class="navigation-list-link">SE-0193 Cross-module inlining and specialization</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0194-derived-collection-of-enum-cases.html" class="navigation-list-link">SE-0194 Derived Collection of Enum Cases</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0195-dynamic-member-lookup.html" class="navigation-list-link">SE-0195 Introduce User-defined "Dynamic Member Lookup" Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0196-diagnostic-directives.html" class="navigation-list-link">SE-0196 Compiler Diagnostic Directives</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0197-remove-where.html" class="navigation-list-link">SE-0197 Adding in-place `removeAll(where:)` to the Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0198-playground-quicklook-api-revamp.html" class="navigation-list-link">SE-0198 Playground QuickLook API Revamp #</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0199-bool-toggle.html" class="navigation-list-link">SE-0199 Adding `toggle` to `Bool`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0200-raw-string-escaping.html" class="navigation-list-link">SE-0200 Enhancing String Literals Delimiters to Support Raw Text</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0201-package-manager-local-dependencies.html" class="navigation-list-link">SE-0201 Package Manager Local Dependencies</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0202-random-unification.html" class="navigation-list-link">SE-0202 Random Unification</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0203-rename-sequence-elements-equal.html" class="navigation-list-link">SE-0203 Rename Sequence.elementsEqual</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0204-add-last-methods.html" class="navigation-list-link">SE-0204 Add `last(where:)` and `lastIndex(where:)` Methods</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0205-withUnsafePointer-for-lets.html" class="navigation-list-link">SE-0205 `withUnsafePointer(to:_:)` and `withUnsafeBytes(of:_:)` for immutable values</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0206-hashable-enhancements.html" class="navigation-list-link">SE-0206 Hashable Enhancements</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0207-containsOnly.html" class="navigation-list-link">SE-0207 Add an `allSatisfy` algorithm to `Sequence`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0208-package-manager-system-library-targets.html" class="navigation-list-link">SE-0208 Package Manager System Library Targets</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0209-package-manager-swift-lang-version-update.html" class="navigation-list-link">SE-0209 Package Manager Swift Language Version API Update</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0210-key-path-offset.html" class="navigation-list-link">SE-0210 Add an `offset(of:)` method to `MemoryLayout`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0211-unicode-scalar-properties.html" class="navigation-list-link">SE-0211 Add Unicode Properties to `Unicode.Scalar`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0212-compiler-version-directive.html" class="navigation-list-link">SE-0212 Compiler Version Directive</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0213-literal-init-via-coercion.html" class="navigation-list-link">SE-0213 Literal initialization via coercion</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0214-DictionaryLiteral.html" class="navigation-list-link">SE-0214 Renaming the `DictionaryLiteral` type to `KeyValuePairs`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0215-conform-never-to-hashable-and-equatable.html" class="navigation-list-link">SE-0215 Conform `Never` to `Equatable` and `Hashable`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0216-dynamic-callable.html" class="navigation-list-link">SE-0216 Introduce user-defined dynamically "callable" types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0217-bangbang.html" class="navigation-list-link">SE-0217 Introducing the `!!` "Unwrap or Die" operator to the Swift Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0218-introduce-compact-map-values.html" class="navigation-list-link">SE-0218 Introduce `compactMapValues` to Dictionary</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0219-package-manager-dependency-mirroring.html" class="navigation-list-link">SE-0219 Package Manager Dependency Mirroring</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0220-count-where.html" class="navigation-list-link">SE-0220 `count(where:)`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0221-character-properties.html" class="navigation-list-link">SE-0221 Character Properties</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0222-lazy-compactmap-sequence.html" class="navigation-list-link">SE-0222 Lazy CompactMap Sequence</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0223-array-uninitialized-initializer.html" class="navigation-list-link">SE-0223 Accessing an Array's Uninitialized Buffer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0224-ifswift-lessthan-operator.html" class="navigation-list-link">SE-0224 Support 'less than' operator in compilation conditions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0225-binaryinteger-iseven-isodd-ismultiple.html" class="navigation-list-link">SE-0225 Adding `isMultiple` to `BinaryInteger`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0226-package-manager-target-based-dep-resolution.html" class="navigation-list-link">SE-0226 Package Manager Target Based Dependency Resolution</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0227-identity-keypath.html" class="navigation-list-link">SE-0227 Identity key path</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0228-fix-expressiblebystringinterpolation.html" class="navigation-list-link">SE-0228 Fix `ExpressibleByStringInterpolation`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0229-simd.html" class="navigation-list-link">SE-0229 SIMD Vectors</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0230-flatten-optional-try.html" class="navigation-list-link">SE-0230 Flatten nested optionals resulting from 'try?'</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0231-optional-iteration.html" class="navigation-list-link">SE-0231 Optional Iteration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0232-remove-customization-points.html" class="navigation-list-link">SE-0232 Remove Some Customization Points from the Standard Library's `Collection` Hierarchy</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0233-additive-arithmetic-protocol.html" class="navigation-list-link">SE-0233 Make `Numeric` Refine a new `AdditiveArithmetic` Protocol</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0234-remove-sequence-subsequence.html" class="navigation-list-link">SE-0234 Remove `Sequence.SubSequence`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0235-add-result.html" class="navigation-list-link">SE-0235 Add Result to the Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0236-package-manager-platform-deployment-settings.html" class="navigation-list-link">SE-0236 Package Manager Platform Deployment Settings</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0237-contiguous-collection.html" class="navigation-list-link">SE-0237 Introduce `withContiguous{Mutable}StorageIfAvailable` methods</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0238-package-manager-build-settings.html" class="navigation-list-link">SE-0238 Package Manager Target Specific Build Settings</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0239-codable-range.html" class="navigation-list-link">SE-0239 Add Codable conformance to Range types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0240-ordered-collection-diffing.html" class="navigation-list-link">SE-0240 Ordered Collection Diffing</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0241-string-index-explicit-encoding-offset.html" class="navigation-list-link">SE-0241 Deprecate String Index Encoded Offsets</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0242-default-values-memberwise.html" class="navigation-list-link">SE-0242 Synthesize default values for the memberwise initializer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0243-codepoint-and-character-literals.html" class="navigation-list-link">SE-0243 Integer-convertible character literals</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0244-opaque-result-types.html" class="navigation-list-link">SE-0244 Opaque Result Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0245-array-uninitialized-initializer.html" class="navigation-list-link">SE-0245 Add an Array Initializer with Access to Uninitialized Storage</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0246-mathable.html" class="navigation-list-link">SE-0246 Generic Math(s) Functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0247-contiguous-strings.html" class="navigation-list-link">SE-0247 Contiguous Strings</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0248-string-gaps-missing-apis.html" class="navigation-list-link">SE-0248 String Gaps and Missing APIs</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0249-key-path-literal-function-expressions.html" class="navigation-list-link">SE-0249 Key Path Expressions as Functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0250-swift-style-guide-and-formatter.html" class="navigation-list-link">SE-0250 Swift Code Style Guidelines and Formatter</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0251-simd-additions.html" class="navigation-list-link">SE-0251 SIMD additions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0252-keypath-dynamic-member-lookup.html" class="navigation-list-link">SE-0252 Key Path Member Lookup</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0253-callable.html" class="navigation-list-link">SE-0253 Introduce callables </a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0254-static-subscripts.html" class="navigation-list-link">SE-0254 Static and class subscripts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0255-omit-return.html" class="navigation-list-link">SE-0255 Implicit returns from single-expression functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0256-contiguous-collection.html" class="navigation-list-link">SE-0256 Introduce `{Mutable}ContiguousCollection` protocol</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0257-elide-comma.html" class="navigation-list-link">SE-0257 Eliding commas from multiline expression lists</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-xxxx-synthesize-computed-property.html" class="navigation-list-link"> Feature name</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Swift Evolution List" aria-label="Search Swift Evolution List" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="//github.com/pondok-programmer/swift-evolution-jekyll">Swift Evolution List</a></li> </ul> </div> <div class="page"> <div id="main-content" class="page-content" role="main"> <h1 id="rationalizing-sequence-end-operation-names"> <a href="#rationalizing-sequence-end-operation-names" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Rationalizing Sequence end-operation names </h1> <ul> <li>Proposal: <a href="0132-sequence-end-ops.md">SE-0132</a></li> <li>Authors: <a href="https://github.com/brentdax">Brent Royal-Gordon</a>, <a href="https://github.com/dabrahams">Dave Abrahams</a></li> <li>Review Manager: <a href="http://github.com/lattner">Chris Lattner</a></li> <li>Status: <strong>Rejected</strong></li> <li>Decision Notes: <a href="https://lists.swift.org/pipermail/swift-evolution-announce/2016-July/000267.html">Rationale</a></li> </ul> <h2 id="introduction"> <a href="#introduction" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Introduction </h2> <p>Sequence and Collection offer many special operations which access or manipulate its first or last elements, but they are plagued by inconsistent naming which can make it difficult to find inverses or remember what the standard library offers. We propose that we standardize these names so they follow consistent, predictable patterns.</p> <p>Swift-evolution thread: <a href="https://lists.swift.org/pipermail/swift-evolution/Week-of-Mon-20160620/021872.html">[Draft] Rationalizing Sequence end-operation names</a></p> <h3 id="scope"> <a href="#scope" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Scope </h3> <p><strong>This proposal does not aim to add or remove any functionality</strong>; it merely renames and redesigns existing operations. <strong>Adding new operations is out of scope for this proposal</strong> unless it’s incidental to the new designs.</p> <p>Nonetheless, we <em>do</em> want the new designs to support adding more operations in the future. The names we’ve chosen are informed by some of the speculative APIs discussed in “Future directions”, although we think they are perfectly sensible names even if nothing else changes.</p> <h2 id="motivation"> <a href="#motivation" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Motivation </h2> <p>The <code class="highlighter-rouge">Sequence</code> and <code class="highlighter-rouge">Collection</code> protocols offer a wide variety of APIs which are defined to operate on, or from, one end of the sequence:</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Get</th> <th>Index</th> <th>Exclude</th> <th>Remove (1)</th> <th>Pop (1)</th> <th>Equate (2)</th> </tr> </thead> <tbody> <tr> <td><strong>Fixed Size</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First 1</td> <td>C.first</td> <td>-</td> <td>S.dropFirst()</td> <td>C.removeFirst()</td> <td>C.popFirst()</td> <td>-</td> </tr> <tr> <td>Last 1</td> <td>C.last</td> <td>-</td> <td>S.dropLast()</td> <td>C.removeLast()</td> <td>C.popLast()</td> <td>-</td> </tr> <tr> <td>First (n: Int)</td> <td>S.prefix(3)</td> <td>-</td> <td>S.dropFirst(3)</td> <td>C.removeFirst(3)</td> <td>-</td> <td>S.starts(with: [x,y,z])</td> </tr> <tr> <td>  …with closure</td> <td>S.prefix(while: isPrime)</td> <td>-</td> <td>S.drop(while: isPrime)</td> <td>-</td> <td>-</td> <td>S.starts(with: [x,y,z], by: ==)</td> </tr> <tr> <td>Last (n: Int)</td> <td>S.suffix(3)</td> <td>-</td> <td>S.dropLast(3)</td> <td>C.removeLast(3)</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td><strong>Searching From End</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First matching element</td> <td>-</td> <td>C.index(of: x)</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>S.first(where: isPrime)</td> <td>C.index(where: isPrime)</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>Last matching element</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td><strong>Based on Index</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>startIndex ..&lt; (i: Index)</td> <td>C.prefix(upTo: i)</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>startIndex … (i: Index)</td> <td>C.prefix(through: i)</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>(i: Index) ..&lt; endIndex</td> <td>C.suffix(from: i)</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> </tbody> </table></div> <blockquote> <p>We have included several blank rows for operands which fit the APIs’ patterns, even if they don’t happen to have any operations currently.</p> <p><strong>Type abbreviations:</strong></p> <ul> <li>S = Sequence</li> <li>C = Collection (or a sub-protocol like BidirectionalCollection)</li> </ul> <p><strong>Notes:</strong></p> <ol> <li> <p><code class="highlighter-rouge">remove</code> and <code class="highlighter-rouge">pop</code> both mutate the array to delete the indicated element(s), but <code class="highlighter-rouge">remove</code> assumes as a precondition that the indicated elements exist, while <code class="highlighter-rouge">pop</code> checks whether or not they exist.</p> </li> <li> <p><code class="highlighter-rouge">String</code> and <code class="highlighter-rouge">NSString</code> have bespoke versions of <em>first n</em> and <em>last n</em> Equate operations, in the form of their <code class="highlighter-rouge">hasPrefix</code> and <code class="highlighter-rouge">hasSuffix</code> methods.</p> </li> </ol> </blockquote> <p>Leaving aside the question of whether any gaps in these tables ought to be filled, we see a number of issues with existing terminology.</p> <h3 id="inconsistent-use-of-prefix-and-suffix"> <a href="#inconsistent-use-of-prefix-and-suffix" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Inconsistent use of <code class="highlighter-rouge">prefix</code> and <code class="highlighter-rouge">suffix</code> </h3> <p>Some APIs which operate on a variable number of elements anchored at one end or the other use the terms <code class="highlighter-rouge">prefix</code> or <code class="highlighter-rouge">suffix</code>:</p> <ul> <li><code class="highlighter-rouge">Sequence.prefix(_:)</code> and <code class="highlighter-rouge">Sequence.suffix(_:)</code></li> <li><code class="highlighter-rouge">Sequence.prefix(while:)</code></li> <li><code class="highlighter-rouge">String.hasPrefix(_:)</code> and <code class="highlighter-rouge">String.hasSuffix(_:)</code></li> </ul> <p>Others, however, use <code class="highlighter-rouge">first</code> or <code class="highlighter-rouge">last</code>:</p> <ul> <li><code class="highlighter-rouge">Sequence.dropFirst(_:)</code> and <code class="highlighter-rouge">Sequence.dropLast(_:)</code></li> <li><code class="highlighter-rouge">Sequence.removeFirst(_:)</code> and <code class="highlighter-rouge">Sequence.removeLast(_:)</code></li> </ul> <p>Still others use neither:</p> <ul> <li><code class="highlighter-rouge">Sequence.starts(with:)</code></li> <li><code class="highlighter-rouge">Sequence.drop(while:)</code></li> </ul> <p>These methods are all closely related, but because of this inconsistent terminology, they fail to form predictable method families.</p> <h3 id="first-has-multiple-meanings"> <a href="#first-has-multiple-meanings" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> <code class="highlighter-rouge">first</code> has multiple meanings </h3> <p>The word <code class="highlighter-rouge">first</code> can mean three different things in these APIs:</p> <ol> <li> <p>Just the very first element of the sequence.</p> </li> <li> <p>A subsequence of elements anchored at the beginning of the sequence, as mentioned in the last point.</p> </li> <li> <p>The first element encountered in the sequence which matches a given criterion when walking from the beginning of the sequence towards the end.</p> </li> </ol> <p>It would be nice to have more clarity here—particularly around #2, which implies different return value behavior.</p> <h3 id="drop-is-misleading-and-scary"> <a href="#drop-is-misleading-and-scary" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> <code class="highlighter-rouge">drop</code> is misleading and scary </h3> <p>In a Swift context, we believe the <code class="highlighter-rouge">drop</code> methods are actively confusing:</p> <ul> <li> <p><code class="highlighter-rouge">drop</code> does not have the -ing or -ed suffix normally used for a nonmutating method.</p> </li> <li> <p><code class="highlighter-rouge">drop</code> has strong associations with destructive operations; it’s the term used, for instance, for deleting whole tables in SQL. Even <code class="highlighter-rouge">dropping</code> would probably sound more like a mutating operation than alternatives.</p> </li> <li> <p>As previously mentioned, the use of <code class="highlighter-rouge">dropFirst</code> and <code class="highlighter-rouge">dropLast</code> for single-drop operations and multiple-drop operations breaks up method families.</p> </li> </ul> <p><code class="highlighter-rouge">drop</code>, <code class="highlighter-rouge">dropFirst</code>, and <code class="highlighter-rouge">dropLast</code> are terms of art, so we allow them a certain amount of leeway. However, we believe the <code class="highlighter-rouge">drop</code> functions go well beyond what we should permit. They are relatively uncommon operations, associated primarily with functional languages rather than mainstream object-oriented or imperative languages, and their violation of the normal Swift naming guidelines is especially misleading.</p> <p>The term-of-art exception is not a suicide pact; it is meant to aid understanding by importing common terminology, not bind us to follow every decision made by any language that came before us. In this case, we think we should ignore precedent and forge our own path.</p> <h3 id="unstated-direction-of-operation"> <a href="#unstated-direction-of-operation" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Unstated direction of operation </h3> <p>Several APIs could theoretically be implemented by working from either end of the sequence, and would return different results depending on the direction, but do not indicate the direction in their names:</p> <ul> <li><code class="highlighter-rouge">Sequence.drop(while:)</code></li> <li><code class="highlighter-rouge">Collection.index(of:)</code></li> </ul> <p>Adding a direction to these APIs would make their behavior clearer and permit us to offer opposite-end equivalents in the future. (Unmerged <a href="https://github.com/apple/swift-evolution/pull/329">swift-evolution pull request 329</a> would add <code class="highlighter-rouge">lastIndex</code> methods.)</p> <h3 id="operations-taking-an-index-are-really-slicing"> <a href="#operations-taking-an-index-are-really-slicing" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Operations taking an index are really slicing </h3> <p><code class="highlighter-rouge">prefix(upTo:)</code>, <code class="highlighter-rouge">prefix(through:)</code>, and <code class="highlighter-rouge">suffix(from:)</code> at first appear to belong to the same family as the other <code class="highlighter-rouge">prefix</code> and <code class="highlighter-rouge">suffix</code> methods, but deeper examination reveals otherwise. They are the only operations which take indices, and they don’t cleanly extend to the other operations which belong to these families. (For instance, it would not make sense to add a <code class="highlighter-rouge">dropPrefix(upTo:)</code> method; it would be equivalent to <code class="highlighter-rouge">suffix(from:)</code>.)</p> <p>Also, on <code class="highlighter-rouge">Int</code>-indexed collections like <code class="highlighter-rouge">Array</code>, <code class="highlighter-rouge">prefix(_:)</code> and <code class="highlighter-rouge">prefix(upTo:)</code> are identical, but there is little relationship between <code class="highlighter-rouge">suffix(_:)</code> and <code class="highlighter-rouge">suffix(from:)</code>, which is confusing.</p> <p><code class="highlighter-rouge">suffix(from:)</code> is a particularly severe source of confusion. The other <code class="highlighter-rouge">suffix</code> APIs all have parameters relative to the <em>end</em> of the collection, but <code class="highlighter-rouge">suffix(from:)</code>’s index is still relative to the <em>beginning</em> of the array. This is obvious if you think deeply about the meaning of an index, but we don’t really want to force our users to stare at a strange API until they have an epiphany.</p> <p>We believe these operations have much more in common with slicing a collection using a range, and that reimagining them as slicing APIs will be more fruitful. Thus, the bottom of the table above should probably be split into a separate one and combined with a table of subrange APIs:</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Type</th> <th>Get</th> <th>Remove</th> <th>Replace</th> </tr> </thead> <tbody> <tr> <td><strong>Based on Index, Arbitrary</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>(i: Index) ..&lt; (j: Index)</td> <td>Range&lt;Index&gt;</td> <td>C[i ..&lt; j]</td> <td>C.removeSubrange(i ..&lt; j)</td> <td>C.replaceSubrange(i ..&lt; j, with: [x,y])</td> </tr> <tr> <td>  …Countable</td> <td>CountableRange&lt;Index&gt;</td> <td>C[i ..&lt; j]</td> <td>C.removeSubrange(i ..&lt; j)</td> <td>C.replaceSubrange(i ..&lt; j, with: [x,y])</td> </tr> <tr> <td>(i: Index) … (j: Index)</td> <td>ClosedRange&lt;Index&gt;</td> <td>C[i … j]</td> <td>C.removeSubrange(i … j)</td> <td>C.replaceSubrange(i … j, with: [x,y])</td> </tr> <tr> <td>  …Countable</td> <td>CountableClosedRange&lt;Index&gt;</td> <td>C[i … j]</td> <td>C.removeSubrange(i … j)</td> <td>C.replaceSubrange(i … j, with: [x,y])</td> </tr> <tr> <td><strong>Based on Index, From End</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>startIndex ..&lt; (i: Index)</td> <td>upTo: Index</td> <td>C.prefix(upTo: i)</td> <td>-</td> <td>-</td> </tr> <tr> <td>(i: Index) ..&lt; endIndex</td> <td>from: Index</td> <td>C.suffix(from: i)</td> <td>-</td> <td>-</td> </tr> <tr> <td>startIndex … (i: Index)</td> <td>through: Index</td> <td>C.prefix(through: i)</td> <td>-</td> <td>-</td> </tr> </tbody> </table></div> <h3 id="why-does-it-matter"> <a href="#why-does-it-matter" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Why does it matter? </h3> <p>Many of these APIs are only occasionally necessary, so it’s important that they be easy to find when needed and easy to understand when read. If you know that <code class="highlighter-rouge">prefix(10)</code> will get the first ten elements but don’t know what its inverse is, you will probably not guess that it’s <code class="highlighter-rouge">dropFirst(10)</code>. The confusing, conflicting names in these APIs are a barrier to users adopting them where appropriate.</p> <h2 id="proposed-solution"> <a href="#proposed-solution" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Proposed solution </h2> <p>We sever the index-taking APIs from the others, forming two separate families, which we will call the “Sequence-end operations” and the “index-based operations”. We then consider and redesign them along separate lines.</p> <h3 id="sequence-end-operations"> <a href="#sequence-end-operations" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Sequence-end operations </h3> <p>Each of these APIs should be renamed to use a directional word based on its row in the table:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Operand</th> <th>Directional word</th> </tr> </thead> <tbody> <tr> <td><strong>Fixed Size</strong></td> <td> </td> </tr> <tr> <td>First 1</td> <td>first</td> </tr> <tr> <td>Last 1</td> <td>last</td> </tr> <tr> <td>First (n: Int)</td> <td>prefix</td> </tr> <tr> <td>  …with closure</td> <td>prefix</td> </tr> <tr> <td>Last (n: Int)</td> <td>suffix</td> </tr> <tr> <td>  …with closure</td> <td>suffix</td> </tr> <tr> <td><strong>Searching From End</strong></td> <td> </td> </tr> <tr> <td>First matching element</td> <td>first</td> </tr> <tr> <td>  …with closure</td> <td>first</td> </tr> <tr> <td>Last matching element</td> <td>last</td> </tr> <tr> <td>  …with closure</td> <td>last</td> </tr> </tbody> </table></div> <p>To accomplish this, <code class="highlighter-rouge">starts(with:)</code> should be renamed to <code class="highlighter-rouge">hasPrefix(_:)</code>, and other APIs should have directional words replaced or added as appropriate.</p> <p>Additionally, the word <code class="highlighter-rouge">drop</code> in the “Exclude” APIs should be replaced with <code class="highlighter-rouge">removing</code>. These operations omit the same elements which the <code class="highlighter-rouge">remove</code> operations delete, so even though the types are not always the same (<code class="highlighter-rouge">removing</code> returns <code class="highlighter-rouge">SubSequence</code>, not <code class="highlighter-rouge">Self</code>), we think they are similar enough to deserve to be treated as nonmutating forms.</p> <p>These changes yield (altered names <strong>bold</strong>):</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Get</th> <th>Index</th> <th>Exclude</th> <th>Remove (1)</th> <th>Pop (1)</th> <th>Equate (2)</th> </tr> </thead> <tbody> <tr> <td><strong>Fixed Size</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First 1</td> <td>C.first</td> <td>-</td> <td><strong>S.removingFirst()</strong></td> <td>C.removeFirst()</td> <td>C.popFirst()</td> <td>-</td> </tr> <tr> <td>Last 1</td> <td>C.last</td> <td>-</td> <td><strong>S.removingLast()</strong></td> <td>C.removeLast()</td> <td>C.popLast()</td> <td>-</td> </tr> <tr> <td>First (n: Int)</td> <td>S.prefix(3)</td> <td>-</td> <td><strong>S.removingPrefix(3)</strong></td> <td><strong>C.removePrefix(3)</strong></td> <td>-</td> <td><strong>S.hasPrefix([x,y,z])</strong></td> </tr> <tr> <td>  …with closure</td> <td>S.prefix(while: isPrime)</td> <td>-</td> <td><strong>S.removingPrefix(while: isPrime)</strong></td> <td>-</td> <td>-</td> <td><strong>S.hasPrefix([x,y,z], by: ==)</strong></td> </tr> <tr> <td>Last (n: Int)</td> <td>S.suffix(3)</td> <td>-</td> <td><strong>S.removingSuffix(3)</strong></td> <td><strong>C.removeSuffix(3)</strong></td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td><strong>Searching From End</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First matching element</td> <td>-</td> <td><strong>C.firstIndex(of: x)</strong></td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>S.first(where: isPrime)</td> <td><strong>C.firstIndex(where: isPrime)</strong></td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>Last matching element</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> <td>-</td> </tr> </tbody> </table></div> <h3 id="index-based-operations"> <a href="#index-based-operations" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Index-based operations </h3> <p>Because these APIs look up elements based on their indices, we believe these operations should be exposed as subscripts, and ideally should look like other slicing operations:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">let</span> <span class="nv">head</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="o">..&lt;</span><span class="n">i</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">tail</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="n">i</span><span class="o">..&lt;</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">rearrangedPeople</span> <span class="o">=</span> <span class="n">tail</span> <span class="o">+</span> <span class="n">head</span>
</code></pre></div></div> <!-- Comment to make my editor happy --> <p>We will accomplish this by introducing two new types, <code class="highlighter-rouge">IncompleteRange</code> and <code class="highlighter-rouge">IncompleteClosedRange</code>. These are similar to <code class="highlighter-rouge">Range</code> and <code class="highlighter-rouge">ClosedRange</code>, except that the bounds are optional.</p> <p>To construct them, we will introduce both prefix and suffix operators taking a non-optional bound, and infix operators taking optional bounds. (We offer both because <code class="highlighter-rouge">c[..&lt;i]</code> is more convenient than <code class="highlighter-rouge">c[nil ..&lt; i]</code>, but doesn’t allow you to dynamically choose between supplying and omitting a bound.) These will follow the existing convention: <code class="highlighter-rouge">..&lt;</code> will construct the half-open <code class="highlighter-rouge">IncompleteRange</code>, while <code class="highlighter-rouge">...</code> will construct <code class="highlighter-rouge">IncompleteClosedRange</code>.</p> <p>Rather than continuing to proliferate overloads of slicing subscripts, we will also introduce a new <code class="highlighter-rouge">RangeExpression</code> protocol which allows any range-like type to convert itself into a plain <code class="highlighter-rouge">Range&lt;Index&gt;</code> appropriate to the collection in question. Thus, there should only be two range subscripts: one taking <code class="highlighter-rouge">Range&lt;Index&gt;</code>, and one taking everything else.</p> <p>We will also modify the existing <code class="highlighter-rouge">removeSubrange(_:)</code> and <code class="highlighter-rouge">replaceSubrange(_:with:)</code> calls to take <code class="highlighter-rouge">RangeExpression</code> instances, thereby merging many existing variants into one while simultaneously extending them to support <code class="highlighter-rouge">IncompleteRange</code> and <code class="highlighter-rouge">IncompleteClosedRange</code>. Though technically additive, we believe this is an easy win.</p> <p>Thus, the table above becomes:</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Type</th> <th>Get</th> <th>Remove</th> <th>Replace</th> </tr> </thead> <tbody> <tr> <td><strong>Based on Index, Arbitrary</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>(i: Index) ..&lt; (j: Index)</td> <td>Range&lt;Index&gt;</td> <td>C[i ..&lt; j]</td> <td>C.removeSubrange(i ..&lt; j)</td> <td>C.replaceSubrange(i ..&lt; j, with: [x,y])</td> </tr> <tr> <td>  …Countable</td> <td>CountableRange&lt;Index&gt;</td> <td>C[i ..&lt; j]</td> <td>C.removeSubrange(i ..&lt; j)</td> <td>C.replaceSubrange(i ..&lt; j, with: [x,y])</td> </tr> <tr> <td>(i: Index) … (j: Index)</td> <td>ClosedRange&lt;Index&gt;</td> <td>C[i … j]</td> <td>C.removeSubrange(i … j)</td> <td>C.replaceSubrange(i … j, with: [x,y])</td> </tr> <tr> <td>  …Countable</td> <td>CountableClosedRange&lt;Index&gt;</td> <td>C[i … j]</td> <td>C.removeSubrange(i … j)</td> <td>C.replaceSubrange(i … j, with: [x,y])</td> </tr> <tr> <td><strong>Based on Index, From End</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>startIndex ..&lt; (i: Index)</td> <td><strong>IncompleteRange&lt;Index&gt;</strong></td> <td><strong>C[..&lt;i]</strong></td> <td><strong>C.removeSubrange(..&lt;i)</strong></td> <td><strong>C.replaceSubrange(..&lt;i, with: [x,y])</strong></td> </tr> <tr> <td>(i: Index) ..&lt; endIndex</td> <td><strong>IncompleteRange&lt;Index&gt;</strong></td> <td><strong>C[i..&lt;]</strong></td> <td><strong>C.removeSubrange(i..&lt;)</strong></td> <td><strong>C.replaceSubrange(i..&lt;, with: [x,y])</strong></td> </tr> <tr> <td>startIndex … (i: Index)</td> <td><strong>IncompleteClosedRange&lt;Index&gt;</strong></td> <td><strong>C[…i]</strong></td> <td><strong>C.removeSubrange(…i)</strong></td> <td><strong>C.replaceSubrange(…i, with: [x,y])</strong></td> </tr> </tbody> </table></div> <p>However, it should be implemented with merely:</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Type</th> <th>Get</th> <th>Remove</th> <th>Replace</th> </tr> </thead> <tbody> <tr> <td>(i: Index) ..&lt; (j: Index)</td> <td>Range&lt;Index&gt;</td> <td>C[i ..&lt; j]</td> <td>C.removeSubrange(i ..&lt; j)</td> <td>C.replaceSubrange(i ..&lt; j, with: [x,y])</td> </tr> <tr> <td>Everything else</td> <td>RangeExpression where Bound == Index</td> <td>C[i … j]</td> <td>C.removeSubrange(i … j)</td> <td>C.replaceSubrange(i … j, with: [x,y])</td> </tr> </tbody> </table></div> <h2 id="detailed-design"> <a href="#detailed-design" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Detailed design </h2> <h3 id="sequence-end-operations-1"> <a href="#sequence-end-operations-1" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Sequence-end operations </h3> <p>The following methods should be renamed as follows wherever they appear in the standard library. These are simple textual substitutions; we propose no changes whatsoever to types, parameter interpretations, or other semantics.</p> <div class="table-wrapper"><table> <thead> <tr> <th>Old method</th> <th>New method</th> </tr> </thead> <tbody> <tr> <td><code class="highlighter-rouge">dropFirst() -&gt; SubSequence</code></td> <td><code class="highlighter-rouge">removingFirst() -&gt; SubSequence</code></td> </tr> <tr> <td><code class="highlighter-rouge">dropLast() -&gt; SubSequence</code></td> <td><code class="highlighter-rouge">removingLast() -&gt; SubSequence</code></td> </tr> <tr> <td><code class="highlighter-rouge">dropFirst(_ n: Int) -&gt; SubSequence</code></td> <td><code class="highlighter-rouge">removingPrefix(_ n: Int) -&gt; SubSequence</code></td> </tr> <tr> <td><code class="highlighter-rouge">drop(@noescape while predicate: (Iterator.Element) throws -&gt; Bool) rethrows -&gt; SubSequence</code></td> <td><code class="highlighter-rouge">removingPrefix(@noescape while predicate: (Iterator.Element) throws -&gt; Bool) rethrows -&gt; SubSequence</code></td> </tr> <tr> <td><code class="highlighter-rouge">dropLast(_ n: Int) -&gt; SubSequence</code></td> <td><code class="highlighter-rouge">removingSuffix(_ n: Int) -&gt; SubSequence</code></td> </tr> <tr> <td><code class="highlighter-rouge">removeFirst(_ n: Int)</code></td> <td><code class="highlighter-rouge">removePrefix(_ n: Int)</code></td> </tr> <tr> <td><code class="highlighter-rouge">removeLast(_ n: Int)</code></td> <td><code class="highlighter-rouge">removeSuffix(_ n: Int)</code></td> </tr> <tr> <td><code class="highlighter-rouge">starts&lt;PossiblePrefix: Sequence&gt;(with possiblePrefix: PossiblePrefix) -&gt; Bool where ...</code></td> <td><code class="highlighter-rouge">hasPrefix&lt;PossiblePrefix: Sequence&gt;(_ possiblePrefix: PossiblePrefix) -&gt; Bool where ...</code></td> </tr> <tr> <td><code class="highlighter-rouge">starts&lt;PossiblePrefix : Sequence&gt;(with possiblePrefix: PossiblePrefix, by areEquivalent: @noescape (Iterator.Element, Iterator.Element) throws -&gt; Bool) rethrows -&gt; Bool where ...</code></td> <td><code class="highlighter-rouge">hasPrefix&lt;PossiblePrefix : Sequence&gt;(_ possiblePrefix: PossiblePrefix, by areEquivalent: @noescape (Iterator.Element, Iterator.Element) throws -&gt; Bool) rethrows -&gt; Bool where ...</code></td> </tr> <tr> <td><code class="highlighter-rouge">index(of element: Iterator.Element) -&gt; Index?</code></td> <td><code class="highlighter-rouge">firstIndex(of element: Iterator.Element) -&gt; Index?</code></td> </tr> <tr> <td><code class="highlighter-rouge">index(where predicate: @noescape (Iterator.Element) throws -&gt; Bool) rethrows -&gt; Index?</code></td> <td><code class="highlighter-rouge">firstIndex(where predicate: @noescape (Iterator.Element) throws -&gt; Bool) rethrows -&gt; Index?</code></td> </tr> </tbody> </table></div> <h3 id="index-based-operations-1"> <a href="#index-based-operations-1" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Index-based operations </h3> <p>We will first present an idealized version of the design which cannot be fully implemented in Swift 3 due to generics bugs and limitations. Then we will present the minor changes necessary to implement it. The two should be source-compatible unless users conform their own types to <code class="highlighter-rouge">RangeExpression</code>.</p> <h4 id="idealized-design"> <a href="#idealized-design" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Idealized design </h4> <p>The <code class="highlighter-rouge">RangeExpression</code> protocol is defined like so:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// A type which can be used to slice a collection. A `RangeExpression` can </span>
<span class="c1">/// convert itself to a `Range&lt;Bound&gt;` of indices within a given collection; </span>
<span class="c1">/// the collection can then slice itself with that `Range`.</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">RangeExpression</span> <span class="p">{</span>
  <span class="c1">/// Returns `self` expressed as a range of indices within `collection`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Parameter collection: The collection `self` should be </span>
  <span class="c1">///                        relative to.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Returns: A `Range&lt;Bound&gt;` suitable for slicing `collection`. </span>
  <span class="c1">///           The return value is *not* guaranteed to be inside </span>
  <span class="c1">///           its bounds. Callers should apply the same preconditions </span>
  <span class="c1">///           to the return value as they would to a range provided </span>
  <span class="c1">///           directly by the user.</span>
  <span class="kd">public</span> <span class="kd">func</span> <span class="n">relative</span><span class="o">&lt;</span><span class="kt">C</span><span class="p">:</span> <span class="kt">Collection</span><span class="o">&gt;</span><span class="p">(</span><span class="n">to</span> <span class="nv">collection</span><span class="p">:</span> <span class="kt">C</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">C</span><span class="o">.</span><span class="kt">Index</span> <span class="o">==</span> <span class="kt">Bound</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div> <p>The following existing types will be conformed to <code class="highlighter-rouge">RangeExpressible</code>:</p> <ul> <li><code class="highlighter-rouge">Range</code></li> <li><code class="highlighter-rouge">CountableRange</code></li> <li><code class="highlighter-rouge">ClosedRange</code></li> <li><code class="highlighter-rouge">CountableClosedRange</code></li> </ul> <p>The <code class="highlighter-rouge">Range</code> conformance is not strictly necessary, but allows APIs which do not need to be overridden to implement only a <code class="highlighter-rouge">RangeExpression</code>-based variant. Type inference favors concrete members over generic ones, so it should prefer to use parameters explicitly typed as <code class="highlighter-rouge">Range&lt;Index&gt;</code> over parameters of a generic type constrained to <code class="highlighter-rouge">RangeExpression where Bound == Index</code>.</p> <p>The <code class="highlighter-rouge">Indexable</code> and <code class="highlighter-rouge">MutableIndexable</code> subscripts which take range types other than <code class="highlighter-rouge">Range</code> itself will be removed. So will the <code class="highlighter-rouge">RangeReplaceableCollection</code> subscripts which take range types other than <code class="highlighter-rouge">Range</code>. Instead, they will be replaced with single generic versions taking a <code class="highlighter-rouge">RangeExpression where Bound == Index</code>, using <code class="highlighter-rouge">relative(to:)</code> to convert them to <code class="highlighter-rouge">Range</code>s and then calling through to the plain <code class="highlighter-rouge">Range</code> variants:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">extension</span> <span class="kt">Collection</span> <span class="p">{</span>
  <span class="c1">/// Accesses a contiguous subrange of the collection's elements.</span>
  <span class="c1">///</span>
  <span class="c1">/// The accessed slice uses the same indices for the same elements as the</span>
  <span class="c1">/// original collection. Always use the slice's `startIndex` property</span>
  <span class="c1">/// instead of assuming that its indices start at a particular value.</span>
  <span class="c1">///</span>
  <span class="c1">/// This example demonstrates getting a slice of an array of strings, finding</span>
  <span class="c1">/// the index of one of the strings in the slice, and then using that index</span>
  <span class="c1">/// in the original array.</span>
  <span class="c1">///</span>
  <span class="c1">///     let streets = ["Adams", "Bryant", "Channing", "Douglas", "Evarts"]</span>
  <span class="c1">///     let streetsSlice = streets[2 ..&lt; streets.endIndex]</span>
  <span class="c1">///     print(streetsSlice)</span>
  <span class="c1">///     // Prints "["Channing", "Douglas", "Evarts"]"</span>
  <span class="c1">///</span>
  <span class="c1">///     let index = streetsSlice.index(of: "Evarts")    // 4</span>
  <span class="c1">///     print(streets[index!])</span>
  <span class="c1">///     // Prints "Evarts"</span>
  <span class="c1">///</span>
  <span class="c1">/// - Parameter bounds: A range of the collection's indices. The bounds of</span>
  <span class="c1">///   the range must be valid indices of the </span>
  <span class="kd">public</span> <span class="kd">subscript</span><span class="o">&lt;</span><span class="kt">R</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">bounds</span><span class="p">:</span> <span class="kt">R</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SubSequence</span> <span class="k">where</span> <span class="kt">R</span><span class="p">:</span> <span class="kt">RangeExpression</span><span class="p">,</span> <span class="kt">R</span><span class="o">.</span><span class="kt">Bound</span> <span class="o">==</span> <span class="kt">Index</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">self</span><span class="p">[</span><span class="n">bounds</span><span class="o">.</span><span class="nf">relative</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="k">self</span><span class="p">)]</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">extension</span> <span class="kt">MutableCollection</span> <span class="p">{</span>
  <span class="c1">/// Accesses a contiguous subrange of the collection's elements.</span>
  <span class="c1">///</span>
  <span class="c1">/// The accessed slice uses the same indices for the same elements as the</span>
  <span class="c1">/// original collection. Always use the slice's `startIndex` property</span>
  <span class="c1">/// instead of assuming that its indices start at a particular value.</span>
  <span class="c1">///</span>
  <span class="c1">/// This example demonstrates getting a slice of an array of strings, finding</span>
  <span class="c1">/// the index of one of the strings in the slice, and then using that index</span>
  <span class="c1">/// in the original array.</span>
  <span class="c1">///</span>
  <span class="c1">///     let streets = ["Adams", "Bryant", "Channing", "Douglas", "Evarts"]</span>
  <span class="c1">///     let streetsSlice = streets[2 ..&lt; streets.endIndex]</span>
  <span class="c1">///     print(streetsSlice)</span>
  <span class="c1">///     // Prints "["Channing", "Douglas", "Evarts"]"</span>
  <span class="c1">///</span>
  <span class="c1">///     let index = streetsSlice.index(of: "Evarts")    // 4</span>
  <span class="c1">///     streets[index!] = "Eustace"</span>
  <span class="c1">///     print(streets[index!])</span>
  <span class="c1">///     // Prints "Eustace"</span>
  <span class="c1">///</span>
  <span class="c1">/// - Parameter bounds: A range of the collection's indices. The bounds of</span>
  <span class="c1">///   the range must be valid indices of the collection.</span>
  <span class="kd">public</span> <span class="kd">subscript</span><span class="o">&lt;</span><span class="kt">R</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">bounds</span><span class="p">:</span> <span class="kt">R</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SubSequence</span> <span class="k">where</span> <span class="kt">R</span><span class="p">:</span> <span class="kt">RangeExpression</span><span class="p">,</span> <span class="kt">R</span><span class="o">.</span><span class="kt">Bound</span> <span class="o">==</span> <span class="kt">Index</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">self</span><span class="p">[</span><span class="n">bounds</span><span class="o">.</span><span class="nf">relative</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="k">self</span><span class="p">)]</span>
    <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span>
      <span class="k">self</span><span class="p">[</span><span class="n">bounds</span><span class="o">.</span><span class="nf">relative</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="k">self</span><span class="p">)]</span> <span class="o">=</span> <span class="n">newValue</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">extension</span> <span class="kt">RangeReplaceableCollection</span> <span class="p">{</span>
  <span class="c1">/// Replaces the specified subrange of elements with the given collection.</span>
  <span class="c1">///</span>
  <span class="c1">/// This method has the effect of removing the specified range of elements</span>
  <span class="c1">/// from the collection and inserting the new elements at the same location.</span>
  <span class="c1">/// The number of new elements need not match the number of elements being</span>
  <span class="c1">/// removed.</span>
  <span class="c1">///</span>
  <span class="c1">/// In this example, three elements in the middle of an array of integers are</span>
  <span class="c1">/// replaced by the five elements of a `Repeated&lt;Int&gt;` instance.</span>
  <span class="c1">///</span>
  <span class="c1">///      var nums = [10, 20, 30, 40, 50]</span>
  <span class="c1">///      nums.replaceSubrange(1...3, with: repeatElement(1, count: 5))</span>
  <span class="c1">///      print(nums)</span>
  <span class="c1">///      // Prints "[10, 1, 1, 1, 1, 1, 50]"</span>
  <span class="c1">///</span>
  <span class="c1">/// If you pass a zero-length range as the `subrange` parameter, this method</span>
  <span class="c1">/// inserts the elements of `newElements` at `subrange.startIndex`. Calling</span>
  <span class="c1">/// the `insert(contentsOf:at:)` method instead is preferred.</span>
  <span class="c1">///</span>
  <span class="c1">/// Likewise, if you pass a zero-length collection as the `newElements`</span>
  <span class="c1">/// parameter, this method removes the elements in the given subrange</span>
  <span class="c1">/// without replacement. Calling the `removeSubrange(_:)` method instead is</span>
  <span class="c1">/// preferred.</span>
  <span class="c1">///</span>
  <span class="c1">/// Calling this method may invalidate any existing indices for use with this</span>
  <span class="c1">/// collection.</span>
  <span class="c1">///</span>
  <span class="c1">/// - Parameters:</span>
  <span class="c1">///   - subrange: The subrange of the collection to replace. The bounds of</span>
  <span class="c1">///     the range must be valid indices of the collection.</span>
  <span class="c1">///   - newElements: The new elements to add to the collection.</span>
  <span class="c1">///</span>
  <span class="c1">/// - Complexity: O(*m*), where *m* is the combined length of the collection</span>
  <span class="c1">///   and `newElements`. If the call to `replaceSubrange` simply appends the</span>
  <span class="c1">///   contents of `newElements` to the collection, the complexity is O(*n*),</span>
  <span class="c1">///   where *n* is the length of `newElements`.</span>
  <span class="kd">public</span> <span class="k">mutating</span> <span class="kd">func</span> <span class="n">replaceSubrange</span><span class="o">&lt;</span><span class="kt">R</span><span class="p">,</span> <span class="kt">C</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="n">_</span> <span class="nv">subrange</span><span class="p">:</span> <span class="kt">R</span><span class="p">,</span>
    <span class="n">with</span> <span class="nv">newElements</span><span class="p">:</span> <span class="kt">C</span>
  <span class="p">)</span> <span class="k">where</span> <span class="kt">R</span> <span class="p">:</span> <span class="kt">RangeExpression</span><span class="p">,</span> <span class="kt">R</span><span class="o">.</span><span class="kt">Bound</span> <span class="o">==</span> <span class="kt">Index</span><span class="p">,</span> <span class="kt">C</span> <span class="p">:</span> <span class="kt">Collection</span><span class="p">,</span> <span class="kt">C</span><span class="o">.</span><span class="kt">Iterator</span><span class="o">.</span><span class="kt">Element</span> <span class="o">==</span> <span class="kt">Iterator</span><span class="o">.</span><span class="kt">Element</span> <span class="p">{</span>
    <span class="nf">replaceSubrange</span><span class="p">(</span><span class="n">subrange</span><span class="o">.</span><span class="nf">relative</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="k">self</span><span class="p">),</span> <span class="nv">with</span><span class="p">:</span> <span class="n">newElements</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">/// Removes the elements in the specified subrange from the collection.</span>
  <span class="c1">///</span>
  <span class="c1">/// All the elements following the specified position are moved to close the</span>
  <span class="c1">/// gap. This example removes two elements from the middle of an array of</span>
  <span class="c1">/// measurements.</span>
  <span class="c1">///</span>
  <span class="c1">///     var measurements = [1.2, 1.5, 2.9, 1.2, 1.5]</span>
  <span class="c1">///     measurements.removeSubrange(1..&lt;3)</span>
  <span class="c1">///     print(measurements)</span>
  <span class="c1">///     // Prints "[1.2, 1.5]"</span>
  <span class="c1">///</span>
  <span class="c1">/// Calling this method may invalidate any existing indices for use with this</span>
  <span class="c1">/// collection.</span>
  <span class="c1">///</span>
  <span class="c1">/// - Parameter bounds: The range of the collection to be removed. The</span>
  <span class="c1">///   bounds of the range must be valid indices of the collection.</span>
  <span class="c1">///</span>
  <span class="c1">/// - Complexity: O(*n*), where *n* is the length of the collection.</span>
  <span class="kd">public</span> <span class="k">mutating</span> <span class="kd">func</span> <span class="n">removeSubrange</span><span class="o">&lt;</span><span class="kt">R</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">bounds</span><span class="p">:</span> <span class="kt">R</span><span class="p">)</span> <span class="k">where</span> <span class="kt">R</span> <span class="p">:</span> <span class="kt">RangeExpression</span><span class="p">,</span> <span class="kt">R</span><span class="o">.</span><span class="kt">Bound</span> <span class="o">==</span> <span class="kt">Index</span> <span class="p">{</span>
    <span class="nf">removeSubrange</span><span class="p">(</span><span class="n">bounds</span><span class="o">.</span><span class="nf">relative</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="k">self</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>The <code class="highlighter-rouge">Collection</code>- and <code class="highlighter-rouge">RangeReplaceableCollection</code>-mimicking APIs on <code class="highlighter-rouge">String</code> will be similarly replaced with <code class="highlighter-rouge">RangeExpression</code>-based versions, except that here the <code class="highlighter-rouge">Range</code> versions will be removed too, so all calls will be through <code class="highlighter-rouge">RangeExpression</code>.</p> <p>The <code class="highlighter-rouge">IncompleteRange</code> and <code class="highlighter-rouge">IncompleteClosedRange</code> types will be very similar. They are designed to be useful generally, not merely with <code class="highlighter-rouge">RangeExpressible</code>. Below is the interface for <code class="highlighter-rouge">IncompleteRange</code>; <code class="highlighter-rouge">IncompleteClosedRange</code> would be analogous.</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">prefix</span> <span class="k">operator</span> <span class="o">..&lt;</span> <span class="p">{}</span>
<span class="k">postfix</span> <span class="k">operator</span> <span class="o">..&lt;</span> <span class="p">{}</span>

<span class="c1">/// A `Range` which may not have all of its bounds specified.</span>
<span class="c1">/// The `IncompleteRange` can be completed by providing a </span>
<span class="c1">/// `Range` or `CountableRange` from which it can retrieve </span>
<span class="c1">/// default upper and lower bounds.</span>
<span class="kd">public</span> <span class="kd">struct</span> <span class="kt">IncompleteRange</span><span class="o">&lt;</span><span class="kt">Bound</span> <span class="p">:</span> <span class="kt">Comparable</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="c1">/// The lowest value within the range. </span>
  <span class="c1">/// If `nil`, completing the range will adopt the default value's </span>
  <span class="c1">/// `lowerBound`.</span>
  <span class="kd">public</span> <span class="k">let</span> <span class="nv">lowerBound</span><span class="p">:</span> <span class="kt">Bound</span><span class="p">?</span>
  <span class="c1">/// The value just above the highest value within the range.</span>
  <span class="c1">/// If `nil`, completing the range will adopt the default value's </span>
  <span class="c1">/// `upperBound`.</span>
  <span class="kd">public</span> <span class="k">let</span> <span class="nv">upperBound</span><span class="p">:</span> <span class="kt">Bound</span><span class="p">?</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">IncompleteRange</span> <span class="p">{</span>
  <span class="c1">/// Returns a `Range` with the same `upperBound` </span>
  <span class="c1">/// and `lowerBound` as the current instance. `nil` bounds are </span>
  <span class="c1">/// filled in from `defaultBounds`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// This method does not check whether `lowerBound` and `upperBound` </span>
  <span class="c1">/// lie within `defaultBounds`. </span>
  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">completed</span><span class="p">(</span><span class="n">by</span> <span class="n">defaultBounds</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>
  
  <span class="c1">/// Returns a `Range` with the same `upperBound` </span>
  <span class="c1">/// and `lowerBound` as the current instance. `nil` bounds are </span>
  <span class="c1">/// filled in from `defaultBounds`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// This method does not check whether `lowerBound` and `upperBound` </span>
  <span class="c1">/// lie within `defaultBounds`. </span>
  <span class="c1">/// Nor does it check whether the resulting `lowerBound` is below </span>
  <span class="c1">/// its `upperBound`.</span>
  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">completed</span><span class="p">(</span><span class="n">byUnchecked</span> <span class="n">defaultBounds</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">IncompleteRange</span> <span class="k">where</span>
    <span class="kt">Bound</span> <span class="p">:</span> <span class="kt">Strideable</span><span class="p">,</span>
    <span class="kt">Bound</span><span class="o">.</span><span class="kt">Stride</span> <span class="p">:</span> <span class="kt">SignedInteger</span> <span class="p">{</span>
  <span class="c1">/// Returns a `CountableRange` with the same `upperBound` </span>
  <span class="c1">/// and `lowerBound` as the current instance. `nil` bounds are </span>
  <span class="c1">/// filled in from `defaultBounds`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// This method does not check whether `lowerBound` and `upperBound` </span>
  <span class="c1">/// lie within `defaultBounds`. </span>
  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">completed</span><span class="p">(</span><span class="n">by</span> <span class="n">defaultBounds</span><span class="p">:</span> <span class="kt">CountableRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">CountableRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>
  
  <span class="c1">/// Returns a `CountableRange` with the same `upperBound` </span>
  <span class="c1">/// and `lowerBound` as the current instance. `nil` bounds are </span>
  <span class="c1">/// filled in from `defaultBounds`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// This method does not check whether `lowerBound` and `upperBound` </span>
  <span class="c1">/// lie within `defaultBounds`. </span>
  <span class="c1">/// Nor does it check whether the resulting `lowerBound` is below </span>
  <span class="c1">/// its `upperBound`.</span>
  <span class="kd">public</span> <span class="kd">func</span> <span class="nf">completed</span><span class="p">(</span><span class="n">byUnchecked</span> <span class="n">defaultBounds</span><span class="p">:</span> <span class="kt">CountableRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">CountableRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">IncompleteRange</span><span class="p">:</span> <span class="kt">RangeExpression</span> <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>

<span class="c1">/// Constructs an `IncompleteRange` with the provided upper </span>
<span class="c1">/// bound and an unknown lower bound.</span>
<span class="kd">public</span> <span class="k">prefix</span> <span class="kd">func</span> <span class="o">..&lt;</span> <span class="o">&lt;</span><span class="kt">Bound</span><span class="p">:</span> <span class="kt">Comparable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">upperBound</span><span class="p">:</span> <span class="kt">Bound</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">IncompleteRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>

<span class="c1">/// Constructs an `IncompleteRange` with the provided lower </span>
<span class="c1">/// bound and an unknown upper bound.</span>
<span class="kd">public</span> <span class="k">postfix</span> <span class="kd">func</span> <span class="o">..&lt;</span> <span class="o">&lt;</span><span class="kt">Bound</span><span class="p">:</span> <span class="kt">Comparable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">lowerBound</span><span class="p">:</span> <span class="kt">Bound</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">IncompleteRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>

<span class="c1">/// Constructs an `IncompleteRange` with the provided upper </span>
<span class="c1">/// and lower bounds. Either or both may be `nil`, in which case the </span>
<span class="c1">/// bound will be provided when the `IncompleteRange` is </span>
<span class="c1">/// completed.</span>
<span class="kd">public</span> <span class="kd">func</span> <span class="o">..&lt;</span> <span class="o">&lt;</span><span class="kt">Bound</span><span class="p">:</span> <span class="kt">Comparable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">lowerBound</span><span class="p">:</span> <span class="kt">Bound</span><span class="p">?,</span> <span class="nv">upperBound</span><span class="p">:</span> <span class="kt">Bound</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">IncompleteRange</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>
</code></pre></div></div> <p>Finally, since they are now redundant, <code class="highlighter-rouge">prefix(upTo:)</code>, <code class="highlighter-rouge">prefix(through:)</code>, and <code class="highlighter-rouge">suffix(from:)</code> will be removed.</p> <h4 id="actual-design"> <a href="#actual-design" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Actual design </h4> <p>The actual design varies from the ideal one in four ways:</p> <ol> <li> <p>The <code class="highlighter-rouge">CountableRange</code> variants of <code class="highlighter-rouge">completed(by:)</code> require a slightly different set of constraints to match a workaround on those types.</p> </li> <li> <p>Swift 3 does not support generic subscripts, so we must instead generate subscripts for each known <code class="highlighter-rouge">RangeExpression</code> type.</p> </li> <li> <p>Because of the complex way <code class="highlighter-rouge">Collection</code>’s protocols are layered, it is necessary to attach subscripts to <code class="highlighter-rouge">Indexable</code> and <code class="highlighter-rouge">MutableIndexable</code>, and constrain <code class="highlighter-rouge">relative(to:)</code>’s parameter to <code class="highlighter-rouge">Indexable</code>, instead of <code class="highlighter-rouge">Collection</code> and <code class="highlighter-rouge">MutableCollection</code>.</p> </li> <li> <p>Swift currently has trouble with the constraints on <code class="highlighter-rouge">RangeExpression.relative(to:)</code> if it is a protocol requirement. Thus, it is instead provided as an extension method. A method with simpler generic constraints is instead used as the requirement.</p> </li> </ol> <p>These will not affect source compatibility except when a user conforms their own types to <code class="highlighter-rouge">RangeExpression</code>, so we suggest we place warnings in the documentation, effectively pre-deprecating its required method.</p> <p>The actual design of <code class="highlighter-rouge">RangeExpression</code> is thus as follows:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">/// A type which can be used to slice a collection. A `RangeExpression` can </span>
<span class="c1">/// convert itself to a `Range&lt;Bound&gt;` of indices within a given collection; </span>
<span class="c1">/// the collection can then slice itself with that `Range`.</span>
<span class="c1">/// </span>
<span class="c1">/// -Warning: The requirements of `RangeExpression` are likely to change </span>
<span class="c1">///           in a future version of Swift. If you conform your own </span>
<span class="c1">///           types to `RangeExpression`, be prepared to migrate them.</span>
<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">RangeExpression</span> <span class="p">{</span>
  <span class="c1">/// The type of the bounds of the `Range` produced by this </span>
  <span class="c1">/// type when used as a `RangeExpression`.</span>
  <span class="kd">associatedtype</span> <span class="kt">Bound</span> <span class="p">:</span> <span class="kt">Comparable</span>
  
  <span class="c1">/// Returns `self` expressed as a `Range&lt;Bound&gt;` suitable for </span>
  <span class="c1">/// slicing a collection with the indicated properties.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Parameter bounds: The range of indices in the collection.</span>
  <span class="c1">///                    Equivalent to `startIndex ..&lt; endIndex`</span>
  <span class="c1">///                    in `Collection`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Parameter offset: A function which can be used to add to or </span>
  <span class="c1">///                    subtract from a bound. Equivalent to </span>
  <span class="c1">///                    `index(_:offsetBy:)` in `Collection`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Returns: A `Range&lt;Bound&gt;` suitable for slicing a collection. </span>
  <span class="c1">///           The return value is *not* guaranteed to be inside </span>
  <span class="c1">///           `bounds`. Callers should apply the same preconditions </span>
  <span class="c1">///           to the return value as they would to a range provided </span>
  <span class="c1">///           directly by the user.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Warning: This method is likely to be replaced in a future version of Swift.</span>
  <span class="c1">///           If you are calling this method, we recommend using the </span>
  <span class="c1">///           `relative(to:)` extension method instead. If you are implementing </span>
  <span class="c1">///           it, be prepared to migrate your code.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Recommended: `relative(to:)`</span>
  <span class="c1">// </span>
  <span class="c1">// WORKAROUND unfiled - We want to have this requirement, but it triggers a generics bug</span>
  <span class="c1">// func relative&lt;C: Indexable&gt;(to collection: C) -&gt; Range&lt;Bound&gt; where C.Index == Bound</span>
  <span class="kd">func</span> <span class="n">relative</span><span class="o">&lt;</span><span class="kt">BoundDistance</span><span class="p">:</span> <span class="kt">SignedInteger</span><span class="o">&gt;</span><span class="p">(</span><span class="n">to</span> <span class="nv">bounds</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">offsettingBy</span> <span class="nv">offset</span><span class="p">:</span> <span class="p">(</span><span class="kt">Bound</span><span class="p">,</span> <span class="kt">BoundDistance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bound</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">RangeExpression</span> <span class="p">{</span>
  <span class="c1">/// Returns `self` expressed as a range of indices within `collection`.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Parameter collection: The collection `self` should be </span>
  <span class="c1">///                        relative to.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -Returns: A `Range&lt;Bound&gt;` suitable for slicing `collection`. </span>
  <span class="c1">///           The return value is *not* guaranteed to be inside </span>
  <span class="c1">///           its bounds. Callers should apply the same preconditions </span>
  <span class="c1">///           to the return value as they would to a range provided </span>
  <span class="c1">///           directly by the user.</span>
  <span class="c1">/// </span>
  <span class="c1">/// -RecommendedOver: `relative(to:offsettingBy:)`</span>
  <span class="kd">public</span> <span class="kd">func</span> <span class="n">relative</span><span class="o">&lt;</span><span class="kt">C</span><span class="p">:</span> <span class="kt">Indexable</span><span class="o">&gt;</span><span class="p">(</span><span class="n">to</span> <span class="nv">collection</span><span class="p">:</span> <span class="kt">C</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Bound</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">C</span><span class="o">.</span><span class="kt">Index</span> <span class="o">==</span> <span class="kt">Bound</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">bounds</span> <span class="o">=</span> <span class="kt">Range</span><span class="p">(</span><span class="nv">uncheckedBounds</span><span class="p">:</span> <span class="p">(</span><span class="nv">lower</span><span class="p">:</span> <span class="n">collection</span><span class="o">.</span><span class="n">startIndex</span><span class="p">,</span> <span class="nv">upper</span><span class="p">:</span> <span class="n">collection</span><span class="o">.</span><span class="n">endIndex</span><span class="p">))</span>
    <span class="k">return</span> <span class="nf">relative</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span> <span class="nv">offsettingBy</span><span class="p">:</span> <span class="n">collection</span><span class="o">.</span><span class="nf">index</span><span class="p">(</span><span class="nv">_</span><span class="p">:</span><span class="nv">offsetBy</span><span class="p">:))</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>A full working prototype of <code class="highlighter-rouge">RangeExpression</code> and the <code class="highlighter-rouge">IncompleteRange</code> types is available <a href="https://github.com/apple/swift/pull/3737">in this pull request</a>.</p> <h2 id="impact-on-existing-code"> <a href="#impact-on-existing-code" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Impact on existing code </h2> <p>Obviously, any code using these APIs under their old names or designs would have to be transitioned to the new names and designs.</p> <p>The sequence-end operations would be by far the simplest to handle; these are simple renamings and could be handed by <code class="highlighter-rouge">@available(renamed:)</code> and migration support. The only complication is that some overloads have transitioned to a new base name, while others have stayed with the old one, but we suspect the migrator is up to this task.</p> <p>The index-based operations are more difficult to migrate. The patterns would be roughly:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">collection</span><span class="o">.</span><span class="nf">prefix</span><span class="p">(</span><span class="nv">upTo</span><span class="p">:</span> <span class="n">i</span><span class="p">)</span>    <span class="o">=&gt;</span> <span class="n">collection</span><span class="p">[</span><span class="o">..&lt;</span><span class="n">i</span><span class="p">]</span>
<span class="n">collection</span><span class="o">.</span><span class="nf">prefix</span><span class="p">(</span><span class="nv">through</span><span class="p">:</span> <span class="n">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">collection</span><span class="p">[</span><span class="o">...</span><span class="n">i</span><span class="p">]</span>
<span class="n">collection</span><span class="o">.</span><span class="nf">suffix</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="n">i</span><span class="p">)</span>    <span class="o">=&gt;</span> <span class="n">collection</span><span class="p">[</span><span class="n">i</span><span class="o">..&lt;</span><span class="p">]</span>
</code></pre></div></div> <p>A custom fix-it would be ideal, but is probably not necessary; an <code class="highlighter-rouge">@available(message:)</code> would do. Presumably this would have to be a special case in the migrator as well.</p> <p>The other changes to the handling of subranges are source-compatible.</p> <h2 id="alternatives-considered"> <a href="#alternatives-considered" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Alternatives considered </h2> <h4 id="skipping-instead-of-removing"> <a href="#skipping-instead-of-removing" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> <code class="highlighter-rouge">skipping</code> instead of <code class="highlighter-rouge">removing</code> </h4> <p>If the type differences are seen as disqualifying <code class="highlighter-rouge">removing</code> as a replacement for <code class="highlighter-rouge">drop</code>, we suggest using <code class="highlighter-rouge">skipping</code> instead.</p> <p>There are, of course, <em>many</em> possible alternatives to <code class="highlighter-rouge">skipping</code>; this is almost a perfect subject for bikeshedding. We’ve chosen <code class="highlighter-rouge">skipping</code> because:</p> <ol> <li> <p>It is not an uncommon word, unlike (say) <code class="highlighter-rouge">omitting</code>. This means non-native English speakers and schoolchildren are more likely to recognize it.</p> </li> <li> <p>It is an -ing verb, unlike (say) <code class="highlighter-rouge">without</code>. This makes it fit common Swift naming patterns more closely.</p> </li> <li> <p>It does not imply danger, unlike (say) <code class="highlighter-rouge">dropping</code>, nor some sort of ongoing process, unlike (say) <code class="highlighter-rouge">ignoring</code>. This makes its behavior more obvious.</p> </li> </ol> <p>If you want to suggest an alternative on swift-evolution, please do not merely mention a synonym; rather, explain <em>why</em> it is an improvement on either these axes or other ones. (We would be particularly interested in names other than <code class="highlighter-rouge">removing</code> which draw an analogy to something else in Swift.)</p> <h4 id="collectiontothroughfrom-instead-of-incompleterange"> <a href="#collectiontothroughfrom-instead-of-incompleterange" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> <code class="highlighter-rouge">collection[to/through/from:]</code> instead of <code class="highlighter-rouge">IncompleteRange</code> </h4> <p>Rather than add new types and operators to replace <code class="highlighter-rouge">prefix(upTo/through:)</code> and <code class="highlighter-rouge">suffix(from:)</code>, we could merely transform these methods into subscripts with parameter labels. This would be a simpler design, but these terms have proven imperfect in the <code class="highlighter-rouge">stride</code> calls, and labeled subscripts are rare (actually, we believe they’re unprecedented in the standard library).</p> <h4 id="longestprefixwhere-instead-of-prefixwhile"> <a href="#longestprefixwhere-instead-of-prefixwhile" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> <code class="highlighter-rouge">longestPrefix(where:)</code> instead of <code class="highlighter-rouge">prefix(while:)</code> </h4> <p>The name <code class="highlighter-rouge">prefix(while:)</code> isn’t perfect; it seems to imply more state than is really involved. (There <em>is</em> a stateful loop, but it’s contained within the method.) A name like <code class="highlighter-rouge">longestPrefix(where:)</code> might read better and avoid this implication, but we think it’s important that <code class="highlighter-rouge">prefix(_:)</code> and <code class="highlighter-rouge">prefix(while:)</code> be given parallel names, and <code class="highlighter-rouge">longestPrefix(3)</code> doesn’t make much sense.</p> <h4 id="no-rangeexpression-protocol"> <a href="#no-rangeexpression-protocol" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> No <code class="highlighter-rouge">RangeExpression</code> protocol </h4> <p>The <code class="highlighter-rouge">RangeExpression</code> protocol could be severed from this proposal, but this seems like a good opportunity to refactor our subrange handling.</p> <h3 id="other-alternatives"> <a href="#other-alternatives" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Other alternatives </h3> <ul> <li> <p>Rather than using <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">last</code> for the “First matching” and “Last matching” categories, we could use a distinct term. These methods have different performance characteristics than the others, and modeling that might be helpful. However, it’s difficult to find a good term—an earlier version of this proposal used <code class="highlighter-rouge">earliest</code> and <code class="highlighter-rouge">latest</code>, which don’t read perfectly—and the level of confusion is pretty low.</p> </li> <li> <p>We considered using <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">last</code> as the basis for both single-element and multiple-element operations (such that <code class="highlighter-rouge">prefix(3)</code> would become <code class="highlighter-rouge">first(3)</code>, etc.), but:</p> <ol> <li> <p>These seemed like distinct functionalities, particularly since their types are different.</p> </li> <li> <p>We’re not comfortable with heavily overloading a property with a bunch of methods, and didn’t want to make <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">last</code> into methods.</p> </li> <li> <p>Most APIs work fine, but <code class="highlighter-rouge">hasFirst(_:)</code> is atrocious, and we see no better alternative which includes the word <code class="highlighter-rouge">first</code>.</p> </li> </ol> </li> <li> <p>We considered moving <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">last</code> to <code class="highlighter-rouge">Sequence</code> and possibly making them methods, but our understanding is that the core team has considered and rejected this approach in the past.</p> </li> <li> <p>We considered moving <code class="highlighter-rouge">removingFirst</code> and <code class="highlighter-rouge">removingLast</code> to Collection and making them properties, to match <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">last</code>, but this seemed like the sort of foolish consistency that Ralph Waldo Emerson warned of.</p> </li> </ul> <h2 id="future-directions"> <a href="#future-directions" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Future directions </h2> <p><strong>Note</strong>: The rest of this proposal is <em>highly</em> speculative and there’s probably no need to read further.</p> <h3 id="other-sequence-api-cleanups"> <a href="#other-sequence-api-cleanups" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Other Sequence API cleanups </h3> <h4 id="seriously-source-breaking"> <a href="#seriously-source-breaking" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Seriously source-breaking </h4> <ul> <li> <p>There is an ongoing discussion about which, if any, of <code class="highlighter-rouge">map</code>, <code class="highlighter-rouge">flatMap</code>, <code class="highlighter-rouge">filter</code>, and <code class="highlighter-rouge">reduce</code> ought to be renamed to more closely match Swift naming conventions. There is also discussion about relabeling many closure parameters.</p> <p>The “Future directions” section below suggests <code class="highlighter-rouge">every(where:)</code> as an alternative to <code class="highlighter-rouge">filter</code> which could be extended in ways compatible with this proposal.</p> </li> </ul> <h4 id="significantly-source-breaking"> <a href="#significantly-source-breaking" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Significantly source-breaking </h4> <ul> <li> <p>The <code class="highlighter-rouge">removeSubrange(_:)</code> and <code class="highlighter-rouge">replaceSubrange(_:with:)</code> APIs are rather oddly named. They might be better renamed to, for instance, <code class="highlighter-rouge">remove(in:)</code> and <code class="highlighter-rouge">replace(in:with:)</code>.</p> </li> <li> <p>It is not clear how important <code class="highlighter-rouge">removingFirst()</code> and <code class="highlighter-rouge">removingLast()</code> actually are, given that they’re exactly equivalent to <code class="highlighter-rouge">removingPrefix(1)</code> and <code class="highlighter-rouge">removingSuffix(1)</code>, and their corresponding “get” members are on <code class="highlighter-rouge">Collection</code> instead of <code class="highlighter-rouge">Sequence</code>. They could be removed.</p> </li> </ul> <h4 id="slightly-source-breaking"> <a href="#slightly-source-breaking" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Slightly source-breaking </h4> <ul> <li> <p><code class="highlighter-rouge">removeFirst/Last()</code> and <code class="highlighter-rouge">popFirst/Last()</code> are very nearly redundant; their only difference is that the <code class="highlighter-rouge">remove</code> methods have a non-<code class="highlighter-rouge">Optional</code> return type and require the collection not be empty, while the <code class="highlighter-rouge">pop</code> methods have an <code class="highlighter-rouge">Optional</code> return type and return <code class="highlighter-rouge">nil</code> if it’s empty.</p> <p>These operations could be merged, with the <code class="highlighter-rouge">remove</code> operations taking on the preconditions of the current <code class="highlighter-rouge">pop</code> operations; additionally, <code class="highlighter-rouge">removePrefix(_:)</code> and <code class="highlighter-rouge">removeSuffix(_:)</code> could drop their equivalent preconditions requiring that the elements being removed exist. These changes would simplify the standard library and make these methods more closely parallel the equivalent <code class="highlighter-rouge">removing</code> methods, which do not have similar preconditions.</p> <p>Performance-critical code which wants to avoid the checks necessary to remove these preconditions could switch to <code class="highlighter-rouge">remove(at:)</code> and <code class="highlighter-rouge">removeSubrange(_:)</code>, which would continue to reject invalid indices.</p> </li> </ul> <h3 id="adding-sequence-and-collection-operations"> <a href="#adding-sequence-and-collection-operations" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Adding sequence and collection operations </h3> <p>This exercise in renaming suggests all sorts of other APIs we might add, and a few we might rename.</p> <p>In general, we have not attempted to carefully scrutinize the usefulness of each of these APIs; instead, we have merely listed the ones which we can imagine some kind of use for. The main exception is the “Pop” operation; we can imagine several different, and rather incompatible, ways to extend it, and we’re not going to take the time to sort out our thoughts merely to write a “Future directions” section.</p> <h4 id="filling-in-the-sequence-end-api-table"> <a href="#filling-in-the-sequence-end-api-table" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Filling in the sequence-end API table </h4> <p>The gaps in the table suggest a number of APIs we could offer in the future. Here, we have filled in all options which are at least coherent:</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Get</th> <th>Index</th> <th>Exclude</th> <th>Remove (1)</th> <th>Pop (1)</th> <th>Equate (2)</th> </tr> </thead> <tbody> <tr> <td><strong>Fixed Size</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First 1</td> <td>C.first</td> <td><strong>C.firstIndex</strong></td> <td>S.removingFirst()</td> <td>C.removeFirst()</td> <td>C.popFirst()</td> <td>-</td> </tr> <tr> <td>Last 1</td> <td>C.last</td> <td><strong>C.lastIndex</strong></td> <td>S.removingLast()</td> <td>C.removeLast()</td> <td>C.popLast()</td> <td>-</td> </tr> <tr> <td>First (n: Int)</td> <td>S.prefix(_:)</td> <td><strong>C.prefixIndex(_:)</strong></td> <td>S.removingPrefix(_:)</td> <td>C.removePrefix(_:)</td> <td>-</td> <td>S.hasPrefix(_:)</td> </tr> <tr> <td>  …with closure</td> <td>S.prefix(while:)</td> <td><strong>C.prefixIndex(while:)</strong></td> <td>S.removingPrefix(while:)</td> <td><strong>C.removePrefix(while:)</strong></td> <td>-</td> <td>S.hasPrefix(_:by:)</td> </tr> <tr> <td>Last (n: Int)</td> <td>S.suffix(_:)</td> <td><strong>C.suffixIndex(_:)</strong></td> <td>S.removingSuffix(_:)</td> <td>C.removeSuffix(_:)</td> <td>-</td> <td><strong>S.hasSuffix(_:)</strong></td> </tr> <tr> <td>  …with closure</td> <td><strong>S.suffix(while:)</strong></td> <td><strong>C.suffixIndex(while:)</strong></td> <td><strong>S.removingSuffix(while:)</strong></td> <td><strong>C.removeSuffix(while:)</strong></td> <td>-</td> <td><strong>S.hasSuffix(_:by:)</strong></td> </tr> <tr> <td><strong>Searching From End</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First matching element</td> <td><strong>S.first(_:)</strong></td> <td>C.firstIndex(of:)</td> <td><strong>S.removingFirst(_:)</strong></td> <td><strong>C.removeFirst(_:)</strong></td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>S.first(where:)</td> <td>C.firstIndex(where:)</td> <td><strong>S.removingFirst(where:)</strong></td> <td><strong>C.removeFirst(where:)</strong></td> <td>-</td> <td>-</td> </tr> <tr> <td>Last matching element</td> <td><strong>S.last(_:)</strong></td> <td><strong>C.lastIndex(of:)</strong></td> <td><strong>S.removingLast(_:)</strong></td> <td><strong>C.removeLast(_:)</strong></td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td><strong>S.last(where:)</strong></td> <td><strong>C.lastIndex(where:)</strong></td> <td><strong>S.removingLast(where:)</strong></td> <td><strong>C.removeLast(where:)</strong></td> <td>-</td> <td>-</td> </tr> </tbody> </table></div> <p>To explain a few entries which might not be immediately obvious: <code class="highlighter-rouge">firstIndex</code> and <code class="highlighter-rouge">lastIndex</code> would be <code class="highlighter-rouge">nil</code> if the collection is empty, and <code class="highlighter-rouge">lastIndex</code> would be the index before <code class="highlighter-rouge">endIndex</code>. <code class="highlighter-rouge">prefixIndex</code> would return the last index of the prefix, and <code class="highlighter-rouge">suffixIndex</code> would return the first index of the suffix; alternatively, these could be named with <code class="highlighter-rouge">Indices</code> and return ranges. <code class="highlighter-rouge">first(_:)</code> and <code class="highlighter-rouge">last(_:)</code> would return the first and last element equal to the provided value; on a <code class="highlighter-rouge">Set</code>, they would be roughly equivalent to <code class="highlighter-rouge">NSSet.member(_:)</code>.</p> <p>The changes we consider most worthy include:</p> <ul> <li> <p>Adding corresponding <code class="highlighter-rouge">last</code> and <code class="highlighter-rouge">suffix</code> methods for all <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">prefix</code> methods.</p> </li> <li> <p>Adding corresponding <code class="highlighter-rouge">while:</code> versions of all appropriate prefix/suffix APIs.</p> </li> </ul> <p>Ones that could be useful, but can usually be emulated with more work:</p> <ul> <li> <p>Adding <code class="highlighter-rouge">remove</code>/<code class="highlighter-rouge">removing</code>-by-content APIs.</p> </li> <li> <p>Adding <code class="highlighter-rouge">prefix/suffixIndex(while:)</code>.</p> </li> </ul> <p>Ones that are mere conveniences or may not have strong use cases:</p> <ul> <li> <p><code class="highlighter-rouge">first/lastIndex</code> and <code class="highlighter-rouge">prefix/suffixIndex(_:)</code>.</p> </li> <li> <p><code class="highlighter-rouge">first/last(_:)</code>.</p> </li> </ul> <h4 id="all-and-every-as-operands"> <a href="#all-and-every-as-operands" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> “All” and “Every” as operands </h4> <p>One could imagine adding rows to this table for “all” and “every matching”. In addition to creating some useful new API, this would also suggest some interesting renaming for existing APIs:</p> <ul> <li> <p><code class="highlighter-rouge">allIndices</code> would be a name for <code class="highlighter-rouge">indices</code>.</p> </li> <li> <p><code class="highlighter-rouge">removeAll()</code> is actually an existing name which happens to fit this pattern.</p> </li> <li> <p><code class="highlighter-rouge">every(where:)</code> would be a name for <code class="highlighter-rouge">filter</code>. Though some of us believe <code class="highlighter-rouge">filter</code> is a strong term of art, we do note that <code class="highlighter-rouge">every(where:)</code> does not cause confusion about the sense of its test, a major complaint about <code class="highlighter-rouge">filter</code>.</p> </li> </ul> <p>In the table below, <strong>bold</strong> indicates new functionality; <em>italics</em> indicates existing functionality renamed to fit this pattern.</p> <div class="table-wrapper"><table> <thead> <tr> <th> </th> <th>Get</th> <th>Index</th> <th>Exclude</th> <th>Remove (1)</th> <th>Pop (1)</th> <th>Equate (2)</th> </tr> </thead> <tbody> <tr> <td><strong>Fixed Size</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First 1</td> <td>C.first</td> <td>C.firstIndex</td> <td>S.removingFirst()</td> <td>C.removeFirst()</td> <td>C.popFirst()</td> <td>-</td> </tr> <tr> <td>Last 1</td> <td>C.last</td> <td>C.lastIndex</td> <td>S.removingLast()</td> <td>C.removeLast()</td> <td>C.popLast()</td> <td>-</td> </tr> <tr> <td>First (n: Int)</td> <td>S.prefix(_:)</td> <td>C.prefixIndex(_:)</td> <td>S.removingPrefix(_:)</td> <td>C.removePrefix(_:)</td> <td>-</td> <td>S.hasPrefix(_:)</td> </tr> <tr> <td>  …with closure</td> <td>S.prefix(while:)</td> <td>C.prefixIndex(while:)</td> <td>S.removingPrefix(while:)</td> <td>C.removePrefix(while:)</td> <td>-</td> <td>S.hasPrefix(_:by:)</td> </tr> <tr> <td>Last (n: Int)</td> <td>S.suffix(_:)</td> <td>C.suffixIndex(_:)</td> <td>S.removingSuffix(_:)</td> <td>C.removeSuffix(_:)</td> <td>-</td> <td>S.hasSuffix(_:)</td> </tr> <tr> <td>  …with closure</td> <td>S.suffix(while:)</td> <td>C.suffixIndex(while:)</td> <td>S.removingSuffix(while:)</td> <td>C.removeSuffix(while:)</td> <td>-</td> <td>S.hasSuffix(_:by:)</td> </tr> <tr> <td>All</td> <td>-</td> <td><em>allIndices</em></td> <td>-</td> <td>C.removeAll()</td> <td>-</td> <td>-</td> </tr> <tr> <td><strong>Searching From End</strong></td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> <td> </td> </tr> <tr> <td>First matching element</td> <td>S.first(_:)</td> <td>C.firstIndex(of:)</td> <td>S.removingFirst(_:)</td> <td>C.removeFirst(_:)</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>S.first(where:)</td> <td>C.firstIndex(where:)</td> <td>S.removingFirst(where:)</td> <td>C.removeFirst(where:)</td> <td>-</td> <td>-</td> </tr> <tr> <td>Last matching element</td> <td>S.last(_:)</td> <td>C.lastIndex(of:)</td> <td>S.removingLast(_:)</td> <td>C.removeLast(_:)</td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td>S.last(where:)</td> <td>C.lastIndex(where:)</td> <td>S.removingLast(where:)</td> <td>C.removeLast(where:)</td> <td>-</td> <td>-</td> </tr> <tr> <td>Every matching element</td> <td><strong>S.every(_:)</strong></td> <td><strong>C.everyIndex(of:)</strong></td> <td><strong>S.removingEvery(_:)</strong></td> <td><strong>C.removeEvery(_:)</strong></td> <td>-</td> <td>-</td> </tr> <tr> <td>  …with closure</td> <td><em>S.every(where:)</em></td> <td><strong>C.everyIndex(where:)</strong></td> <td><strong>S.removingEvery(where:)</strong></td> <td><strong>C.removeEvery(where:)</strong></td> <td>-</td> <td>-</td> </tr> </tbody> </table></div> <p>An alternative to the <code class="highlighter-rouge">every</code> methods is to give them names based on <code class="highlighter-rouge">all</code> or <code class="highlighter-rouge">any</code>, but these tend to require breaks from the naming patterns of the matching <code class="highlighter-rouge">first</code> and <code class="highlighter-rouge">last</code> methods to remain grammatical.</p> </div> </div> </div> </div> </body> </html>
