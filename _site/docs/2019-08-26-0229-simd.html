<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>SE-0229 SIMD Vectors - Swift Evolution List</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>SE-0229 SIMD Vectors | Swift Evolution List</title> <meta name="generator" content="Jekyll v3.8.6" /> <meta property="og:title" content="SE-0229 SIMD Vectors" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Yuhuu!" /> <meta property="og:description" content="Yuhuu!" /> <link rel="canonical" href="http://localhost:4000/docs/2019-08-26-0229-simd.html" /> <meta property="og:url" content="http://localhost:4000/docs/2019-08-26-0229-simd.html" /> <meta property="og:site_name" content="Swift Evolution List" /> <script type="application/ld+json"> {"url":"http://localhost:4000/docs/2019-08-26-0229-simd.html","headline":"SE-0229 SIMD Vectors","description":"Yuhuu!","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight">Swift Evolution List</a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item active"><a href="http://localhost:4000/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item active"><a href="http://localhost:4000/" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="http://localhost:4000/about/" class="navigation-list-link">About</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0001-keywords-as-argument-labels.html" class="navigation-list-link">SE-0001 Allow (most) keywords as argument labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0002-remove-currying.html" class="navigation-list-link">SE-0002 Removing currying `func` declaration syntax</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0003-remove-var-parameters.html" class="navigation-list-link">SE-0003 Removing `var` from Function Parameters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0004-remove-pre-post-inc-decrement.html" class="navigation-list-link">SE-0004 Remove the `++` and `--` operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0005-objective-c-name-translation.html" class="navigation-list-link">SE-0005 Better Translation of Objective-C APIs Into Swift</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0006-apply-api-guidelines-to-the-standard-library.html" class="navigation-list-link">SE-0006 Apply API Guidelines to the Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0007-remove-c-style-for-loops.html" class="navigation-list-link">SE-0007 Remove C-style for-loops with conditions and incrementers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0008-lazy-flatmap-for-optionals.html" class="navigation-list-link">SE-0008 Add a Lazy flatMap for Sequences of Optionals #</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0009-require-self-for-accessing-instance-members.html" class="navigation-list-link">SE-0009 Require self for accessing instance members</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0010-add-staticstring-unicodescalarview.html" class="navigation-list-link">SE-0010 Add StaticString.UnicodeScalarView</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0011-replace-typealias-associated.html" class="navigation-list-link">SE-0011 Replace `typealias` keyword with `associatedtype` for associated type declarations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0012-add-noescape-to-public-library-api.html" class="navigation-list-link">SE-0012 Add `@noescape` to public library API</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0013-remove-partial-application-super.html" class="navigation-list-link">SE-0013 Remove Partial Application of Non-Final Super Methods (Swift 2.2)</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0014-constrained-AnySequence.html" class="navigation-list-link">SE-0014 Constraining `AnySequence.init`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0015-tuple-comparison-operators.html" class="navigation-list-link">SE-0015 Tuple comparison operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0016-initializers-for-converting-unsafe-pointers-to-ints.html" class="navigation-list-link">SE-0016 Add initializers to Int and UInt to convert from UnsafePointer and UnsafeMutablePointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0017-convert-unmanaged-to-use-unsafepointer.html" class="navigation-list-link">SE-0017 Change `Unmanaged` to use `UnsafePointer`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0018-flexible-memberwise-initialization.html" class="navigation-list-link">SE-0018 Flexible Memberwise Initialization</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0019-package-manager-testing.html" class="navigation-list-link">SE-0019 Swift Testing</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0020-if-swift-version.html" class="navigation-list-link">SE-0020 Swift Language Version Build Configuration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0021-generalized-naming.html" class="navigation-list-link">SE-0021 Naming Functions with Argument Labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0022-objc-selectors.html" class="navigation-list-link">SE-0022 Referencing the Objective-C selector of a method</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0023-api-guidelines.html" class="navigation-list-link">SE-0023 API Design Guidelines</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0024-optional-value-setter.html" class="navigation-list-link">SE-0024 Optional Value Setter `??=`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0025-scoped-access-level.html" class="navigation-list-link">SE-0025 Scoped Access Level</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0026-abstract-classes-and-methods.html" class="navigation-list-link">SE-0026 Abstract classes and methods</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0027-string-from-code-units.html" class="navigation-list-link">SE-0027 Expose code unit initializers on String</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0028-modernizing-debug-identifiers.html" class="navigation-list-link">SE-0028 Modernizing Swift's Debugging Identifiers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0029-remove-implicit-tuple-splat.html" class="navigation-list-link">SE-0029 Remove implicit tuple splat behavior from function applications</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0030-property-behavior-decls.html" class="navigation-list-link">SE-0030 Property Behaviors</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0031-adjusting-inout-declarations.html" class="navigation-list-link">SE-0031 Adjusting `inout` Declarations for Type Decoration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0032-sequencetype-find.html" class="navigation-list-link">SE-0032 Add `first(where:)` method to `Sequence`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0033-import-objc-constants.html" class="navigation-list-link">SE-0033 Import Objective-C Constants as Swift Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0034-disambiguating-line.html" class="navigation-list-link">SE-0034 Disambiguating Line Control Statements from Debugging Identifiers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0035-limit-inout-capture.html" class="navigation-list-link">SE-0035 Limiting `inout` capture to `@noescape` contexts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0036-enum-dot.html" class="navigation-list-link">SE-0036 Requiring Leading Dot Prefixes for Enum Instance Member Implementations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0037-clarify-comments-and-operators.html" class="navigation-list-link">SE-0037 Clarify interaction between comments & operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0038-swiftpm-c-language-targets.html" class="navigation-list-link">SE-0038 Package Manager C Language Target Support</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0039-playgroundliterals.html" class="navigation-list-link">SE-0039 Modernizing Playground Literals</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0040-attributecolons.html" class="navigation-list-link">SE-0040 Replacing Equal Signs with Colons For Attribute Arguments</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0041-conversion-protocol-conventions.html" class="navigation-list-link">SE-0041 Updating Protocol Naming Conventions for Conversions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0042-flatten-method-types.html" class="navigation-list-link">SE-0042 Flattening the function type of unapplied method references</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0043-declare-variables-in-case-labels-with-multiple-patterns.html" class="navigation-list-link">SE-0043 Declare variables in 'case' labels with multiple patterns </a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0044-import-as-member.html" class="navigation-list-link">SE-0044 Import as member</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0045-scan-takewhile-dropwhile.html" class="navigation-list-link">SE-0045 Add prefix(while:) and drop(while:) to the stdlib</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0046-first-label.html" class="navigation-list-link">SE-0046 Establish consistent label behavior across all parameters including first labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0047-nonvoid-warn.html" class="navigation-list-link">SE-0047 Defaulting non-Void functions so they warn on unused results</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0048-generic-typealias.html" class="navigation-list-link">SE-0048 Generic Type Aliases</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0049-noescape-autoclosure-type-attrs.html" class="navigation-list-link">SE-0049 Move @noescape and @autoclosure to be type attributes</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0050-floating-point-stride.html" class="navigation-list-link">SE-0050 Decoupling Floating Point Strides from Generic Implementations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0051-stride-semantics.html" class="navigation-list-link">SE-0051 Conventionalizing `stride` semantics</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0052-iterator-post-nil-guarantee.html" class="navigation-list-link">SE-0052 Change IteratorType post-nil guarantee</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0053-remove-let-from-function-parameters.html" class="navigation-list-link">SE-0053 Remove explicit use of `let` from Function Parameters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0054-abolish-iuo.html" class="navigation-list-link">SE-0054 Abolish `ImplicitlyUnwrappedOptional` type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0055-optional-unsafe-pointers.html" class="navigation-list-link">SE-0055 Make unsafe pointer nullability explicit using Optional</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0056-trailing-closures-in-guard.html" class="navigation-list-link">SE-0056 Allow trailing closures in `guard` conditions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0057-importing-objc-generics.html" class="navigation-list-link">SE-0057 Importing Objective-C Lightweight Generics</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0058-objectivecbridgeable.html" class="navigation-list-link">SE-0058 Allow Swift types to provide custom Objective-C representations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0059-updated-set-apis.html" class="navigation-list-link">SE-0059 Update API Naming Guidelines and Rewrite Set APIs Accordingly</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0060-defaulted-parameter-order.html" class="navigation-list-link">SE-0060 Enforcing order of defaulted parameters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0061-autoreleasepool-signature.html" class="navigation-list-link">SE-0061 Add Generic Result and Error Handling to autoreleasepool()</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0062-objc-keypaths.html" class="navigation-list-link">SE-0062 Referencing Objective-C key-paths</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0063-swiftpm-system-module-search-paths.html" class="navigation-list-link">SE-0063 SwiftPM System Module Search Paths</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0064-property-selectors.html" class="navigation-list-link">SE-0064 Referencing the Objective-C selector of property getters and setters</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0065-collections-move-indices.html" class="navigation-list-link">SE-0065 A New Model for Collections and Indices</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0066-standardize-function-type-syntax.html" class="navigation-list-link">SE-0066 Standardize function type argument syntax to require parentheses</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0067-floating-point-protocols.html" class="navigation-list-link">SE-0067 Enhanced Floating Point Protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0068-universal-self.html" class="navigation-list-link">SE-0068 Expanding Swift `Self` to class members and value types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0069-swift-mutability-for-foundation.html" class="navigation-list-link">SE-0069 Mutability and Foundation Value Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0070-optional-requirements.html" class="navigation-list-link">SE-0070 Make Optional Requirements Objective-C-only</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0071-member-keywords.html" class="navigation-list-link">SE-0071 Allow (most) keywords in member references</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0072-eliminate-implicit-bridging-conversions.html" class="navigation-list-link">SE-0072 Fully eliminate implicit bridging conversions from Swift</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0073-noescape-once.html" class="navigation-list-link">SE-0073 Marking closures as executing exactly once</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0074-binary-search.html" class="navigation-list-link">SE-0074 Implementation of Binary Search functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0075-import-test.html" class="navigation-list-link">SE-0075 Adding a Build Configuration Import Test</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0076-copying-to-unsafe-mutable-pointer-with-unsafe-pointer-source.html" class="navigation-list-link">SE-0076 Add overrides taking an UnsafePointer source to non-destructive copying methods on UnsafeMutablePointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0077-operator-precedence.html" class="navigation-list-link">SE-0077 Improved operator declarations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0078-rotate-algorithm.html" class="navigation-list-link">SE-0078 Implement a rotate algorithm, equivalent to std::rotate() in C++</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0079-upgrade-self-from-weak-to-strong.html" class="navigation-list-link">SE-0079 Allow using optional binding to upgrade `self` from a weak to strong reference</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0080-failable-numeric-initializers.html" class="navigation-list-link">SE-0080 Failable Numeric Conversion Initializers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0081-move-where-expression.html" class="navigation-list-link">SE-0081 Move `where` clause to end of declaration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0082-swiftpm-package-edit.html" class="navigation-list-link">SE-0082 Package Manager Editable Packages</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0083-remove-bridging-from-dynamic-casts.html" class="navigation-list-link">SE-0083 Remove bridging conversion behavior from dynamic casts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0084-trailing-commas.html" class="navigation-list-link">SE-0084 Allow trailing commas in parameter lists and tuples</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0085-package-manager-command-name.html" class="navigation-list-link">SE-0085 Package Manager Command Names</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0086-drop-foundation-ns.html" class="navigation-list-link">SE-0086 Drop NS Prefix in Swift Foundation</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0087-lazy-attribute.html" class="navigation-list-link">SE-0087 Rename `lazy` to `@lazy`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0088-libdispatch-for-swift3.html" class="navigation-list-link">SE-0088 Modernize libdispatch for Swift 3 naming conventions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0089-rename-string-reflection-init.html" class="navigation-list-link">SE-0089 Renaming `String.init<T>(_: T)`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0090-remove-dot-self.html" class="navigation-list-link">SE-0090 Remove `.self` and freely allow type references in expressions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0091-improving-operators-in-protocols.html" class="navigation-list-link">SE-0091 Improving operator requirements in protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0092-typealiases-in-protocols.html" class="navigation-list-link">SE-0092 Typealiases in protocols and protocol extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0093-slice-base.html" class="navigation-list-link">SE-0093 Adding a public `base` property to slices</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0094-sequence-function.html" class="navigation-list-link">SE-0094 Add sequence(first:next:) and sequence(state:next:) to the stdlib</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0095-any-as-existential.html" class="navigation-list-link">SE-0095 Replace `protocol<P1,P2>` syntax with `P1 & P2` syntax</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0096-dynamictype.html" class="navigation-list-link">SE-0096 Converting `dynamicType` from a property to an operator</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0097-negative-attributes.html" class="navigation-list-link">SE-0097 Normalizing naming for "negative" attributes</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0098-didset-capitalization.html" class="navigation-list-link">SE-0098 Lowercase `didSet` and `willSet` for more consistent keyword casing</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0099-conditionclauses.html" class="navigation-list-link">SE-0099 Restructuring Condition Clauses</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0100-add-sequence-based-init-and-merge-to-dictionary.html" class="navigation-list-link">SE-0100 Add sequence-based initializers and merge methods to Dictionary</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0101-standardizing-sizeof-naming.html" class="navigation-list-link">SE-0101 Reconfiguring `sizeof` and related functions into a unified `MemoryLayout` struct</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0102-noreturn-bottom-type.html" class="navigation-list-link">SE-0102 Remove `@noreturn` attribute and introduce an empty `Never` type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0103-make-noescape-default.html" class="navigation-list-link">SE-0103 Make non-escaping closures the default</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0104-improved-integers.html" class="navigation-list-link">SE-0104 Protocol-oriented integers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0105-remove-where-from-forin-loops.html" class="navigation-list-link">SE-0105 Removing Where Clauses from For-In Loops</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0106-rename-osx-to-macos.html" class="navigation-list-link">SE-0106 Add a `macOS` Alias for the `OSX` Platform Configuration Test</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0107-unsaferawpointer.html" class="navigation-list-link">SE-0107 UnsafeRawPointer API</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0108-remove-assoctype-inference.html" class="navigation-list-link">SE-0108 Remove associated type inference</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0109-remove-boolean.html" class="navigation-list-link">SE-0109 Remove the `Boolean` protocol </a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0110-distingish-single-tuple-arg.html" class="navigation-list-link">SE-0110 Distinguish between single-tuple and multiple-argument function types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0111-remove-arg-label-type-significance.html" class="navigation-list-link">SE-0111 Remove type system significance of function argument labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0112-nserror-bridging.html" class="navigation-list-link">SE-0112 Improved NSError Bridging</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0113-rounding-functions-on-floatingpoint.html" class="navigation-list-link">SE-0113 Add integral rounding functions to FloatingPoint</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0114-buffer-naming.html" class="navigation-list-link">SE-0114 Updating Buffer "Value" Names to "Header" Names</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0115-literal-syntax-protocols.html" class="navigation-list-link">SE-0115 Rename Literal Syntax Protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0116-id-as-any.html" class="navigation-list-link">SE-0116 Import Objective-C `id` as Swift `Any` type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0117-non-public-subclassable-by-default.html" class="navigation-list-link">SE-0117 Allow distinguishing between public access and public overridability</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0118-closure-parameter-names-and-labels.html" class="navigation-list-link">SE-0118 Closure Parameter Names and Labels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0119-extensions-access-modifiers.html" class="navigation-list-link">SE-0119 Remove access modifiers from extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0120-revise-partition-method.html" class="navigation-list-link">SE-0120 Revise `partition` Method Signature</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0121-remove-optional-comparison-operators.html" class="navigation-list-link">SE-0121 Remove `Optional` Comparison Operators</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0122-use-colons-for-subscript-type-declarations.html" class="navigation-list-link">SE-0122 Use colons for subscript declarations</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0123-disallow-value-to-optional-coercion-in-operator-arguments.html" class="navigation-list-link">SE-0123 Disallow coercion to optionals in operator arguments</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0124-bitpattern-label-for-int-initializer-objectidentfier.html" class="navigation-list-link">SE-0124 `Int.init(ObjectIdentifier)` and `UInt.init(ObjectIdentifier)` should have a `bitPattern:` label</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0125-remove-nonobjectivecbase.html" class="navigation-list-link">SE-0125 Remove `NonObjectiveCBase` and `isUniquelyReferenced`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0126-refactor-metatypes-repurpose-t-dot-self-and-mirror.html" class="navigation-list-link">SE-0126 Refactor Metatypes, repurpose `T.self` and `Mirror`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0127-cleaning-up-stdlib-ptr-buffer.html" class="navigation-list-link">SE-0127 Cleaning up stdlib Pointer and Buffer Routines</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0128-unicodescalar-failable-initializer.html" class="navigation-list-link">SE-0128 Change failable UnicodeScalar initializers to failable</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0129-package-manager-test-naming-conventions.html" class="navigation-list-link">SE-0129 Package Manager Test Naming Conventions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0130-string-initializers-cleanup.html" class="navigation-list-link">SE-0130 Replace repeating `Character` and `UnicodeScalar` forms of String.init</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0131-anyhashable.html" class="navigation-list-link">SE-0131 Add `AnyHashable` to the standard library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0132-sequence-end-ops.html" class="navigation-list-link">SE-0132 Rationalizing Sequence end-operation names</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0133-rename-flatten-to-joined.html" class="navigation-list-link">SE-0133 Rename `flatten()` to `joined()`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0134-rename-string-properties.html" class="navigation-list-link">SE-0134 Rename two UTF8-related properties on String</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0135-package-manager-support-for-differentiating-packages-by-swift-version.html" class="navigation-list-link">SE-0135 Package Manager Support for Differentiating Packages by Swift version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0136-memory-layout-of-values.html" class="navigation-list-link">SE-0136 Memory layout of values</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0137-avoiding-lock-in.html" class="navigation-list-link">SE-0137 Avoiding Lock-In to Legacy Protocol Designs</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0138-unsaferawbufferpointer.html" class="navigation-list-link">SE-0138 UnsafeRawBufferPointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0139-bridge-nsnumber-and-nsvalue.html" class="navigation-list-link">SE-0139 Bridge Numeric Types to `NSNumber` and Cocoa Structs to `NSValue`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0140-bridge-optional-to-nsnull.html" class="navigation-list-link">SE-0140 Warn when `Optional` converts to `Any`, and bridge `Optional` As Its Payload Or `NSNull`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0141-available-by-swift-version.html" class="navigation-list-link">SE-0141 Availability by Swift version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0142-associated-types-constraints.html" class="navigation-list-link">SE-0142 Permit where clauses to constrain associated types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0143-conditional-conformances.html" class="navigation-list-link">SE-0143 Conditional conformances</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0144-allow-single-dollar-sign-as-valid-identifier.html" class="navigation-list-link">SE-0144 Allow Single Dollar Sign as a Valid Identifier</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0145-package-manager-version-pinning.html" class="navigation-list-link">SE-0145 Package Manager Version Pinning</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0146-package-manager-product-definitions.html" class="navigation-list-link">SE-0146 Package Manager Product Definitions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0147-move-unsafe-initialize-from.html" class="navigation-list-link">SE-0147 Move UnsafeMutablePointer.initialize(from:) to UnsafeMutableBufferPointer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0148-generic-subscripts.html" class="navigation-list-link">SE-0148 Generic Subscripts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0149-package-manager-top-of-tree.html" class="navigation-list-link">SE-0149 Package Manager Support for Top of Tree development</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0150-package-manager-branch-support.html" class="navigation-list-link">SE-0150 Package Manager Support for branches</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0151-package-manager-swift-language-compatibility-version.html" class="navigation-list-link">SE-0151 Package Manager Swift Language Compatibility Version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0152-package-manager-tools-version.html" class="navigation-list-link">SE-0152 Package Manager Tools Version</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0153-compensate-for-the-inconsistency-of-nscopyings-behaviour.html" class="navigation-list-link">SE-0153 Compensate for the inconsistency of `@NSCopying`'s behaviour</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0154-dictionary-key-and-value-collections.html" class="navigation-list-link">SE-0154 Provide Custom Collections for Dictionary Keys and Values</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0155-normalize-enum-case-representation.html" class="navigation-list-link">SE-0155 Normalize Enum Case Representation</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0156-subclass-existentials.html" class="navigation-list-link">SE-0156 Class and Subtype existentials</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0157-recursive-protocol-constraints.html" class="navigation-list-link">SE-0157 Support recursive constraints on associated types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0158-package-manager-manifest-api-redesign.html" class="navigation-list-link">SE-0158 Package Manager Manifest API Redesign</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0159-fix-private-access-levels.html" class="navigation-list-link">SE-0159 Fix Private Access Levels</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0160-objc-inference.html" class="navigation-list-link">SE-0160 Limiting `@objc` inference</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0161-key-paths.html" class="navigation-list-link">SE-0161 Smart KeyPaths: Better Key-Value Coding for Swift</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0162-package-manager-custom-target-layouts.html" class="navigation-list-link">SE-0162 Package Manager Custom Target Layouts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0163-string-revision-1.html" class="navigation-list-link">SE-0163 String Revision: Collection Conformance, C Interop, Transcoding</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0164-remove-final-support-in-protocol-extensions.html" class="navigation-list-link">SE-0164 Remove final support in protocol extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0165-dict.html" class="navigation-list-link">SE-0165 Dictionary & Set Enhancements</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0166-swift-archival-serialization.html" class="navigation-list-link">SE-0166 Swift Archival & Serialization</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0167-swift-encoders.html" class="navigation-list-link">SE-0167 Swift Encoders</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0168-multi-line-string-literals.html" class="navigation-list-link">SE-0168 Multi-Line String Literals</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0169-improve-interaction-between-private-declarations-and-extensions.html" class="navigation-list-link">SE-0169 Improve Interaction Between `private` Declarations and Extensions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0170-nsnumber_bridge.html" class="navigation-list-link">SE-0170 NSNumber bridging and Numeric types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0171-reduce-with-inout.html" class="navigation-list-link">SE-0171 Reduce with `inout`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0172-one-sided-ranges.html" class="navigation-list-link">SE-0172 One-sided Ranges</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0173-swap-indices.html" class="navigation-list-link">SE-0173 Add `MutableCollection.swapAt(_:_:)`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0174-filter-range-replaceable.html" class="navigation-list-link">SE-0174 Change `filter` to return an associated type</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0175-package-manager-revised-dependency-resolution.html" class="navigation-list-link">SE-0175 Package Manager Revised Dependency Resolution</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0176-enforce-exclusive-access-to-memory.html" class="navigation-list-link">SE-0176 Enforce Exclusive Access to Memory</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0177-add-clamped-to-method.html" class="navigation-list-link">SE-0177 Add clamp(to:) to the stdlib</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0178-character-unicode-view.html" class="navigation-list-link">SE-0178 Add `unicodeScalars` property to `Character`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0179-swift-run-command.html" class="navigation-list-link">SE-0179 Swift `run` Command</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0180-string-index-overhaul.html" class="navigation-list-link">SE-0180 String Index Overhaul</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0181-package-manager-cpp-language-version.html" class="navigation-list-link">SE-0181 Package Manager C/C++ Language Standard Support</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0182-newline-escape-in-strings.html" class="navigation-list-link">SE-0182 String Newline Escaping</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0183-substring-affordances.html" class="navigation-list-link">SE-0183 Substring performance affordances</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0184-unsafe-pointers-add-missing.html" class="navigation-list-link">SE-0184 Unsafe[Mutable][Raw][Buffer]Pointer: add missing methods, adjust existing labels for clarity, and remove deallocation size</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0185-synthesize-equatable-hashable.html" class="navigation-list-link">SE-0185 Synthesizing `Equatable` and `Hashable` conformance</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0186-remove-ownership-keyword-support-in-protocols.html" class="navigation-list-link">SE-0186 Remove ownership keyword support in protocols</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0187-introduce-filtermap.html" class="navigation-list-link">SE-0187 Introduce Sequence.compactMap(_:)</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0188-stdlib-index-types-hashable.html" class="navigation-list-link">SE-0188 Make Standard Library Index Types Hashable</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0189-restrict-cross-module-struct-initializers.html" class="navigation-list-link">SE-0189 Restrict Cross-module Struct Initializers</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0190-target-environment-platform-condition.html" class="navigation-list-link">SE-0190 Target environment platform condition</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0191-eliminate-indexdistance.html" class="navigation-list-link">SE-0191 Eliminate `IndexDistance` from `Collection`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0192-non-exhaustive-enums.html" class="navigation-list-link">SE-0192 Handling Future Enum Cases</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0193-cross-module-inlining-and-specialization.html" class="navigation-list-link">SE-0193 Cross-module inlining and specialization</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0194-derived-collection-of-enum-cases.html" class="navigation-list-link">SE-0194 Derived Collection of Enum Cases</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0195-dynamic-member-lookup.html" class="navigation-list-link">SE-0195 Introduce User-defined "Dynamic Member Lookup" Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0196-diagnostic-directives.html" class="navigation-list-link">SE-0196 Compiler Diagnostic Directives</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0197-remove-where.html" class="navigation-list-link">SE-0197 Adding in-place `removeAll(where:)` to the Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0198-playground-quicklook-api-revamp.html" class="navigation-list-link">SE-0198 Playground QuickLook API Revamp #</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0199-bool-toggle.html" class="navigation-list-link">SE-0199 Adding `toggle` to `Bool`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0200-raw-string-escaping.html" class="navigation-list-link">SE-0200 Enhancing String Literals Delimiters to Support Raw Text</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0201-package-manager-local-dependencies.html" class="navigation-list-link">SE-0201 Package Manager Local Dependencies</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0202-random-unification.html" class="navigation-list-link">SE-0202 Random Unification</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0203-rename-sequence-elements-equal.html" class="navigation-list-link">SE-0203 Rename Sequence.elementsEqual</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0204-add-last-methods.html" class="navigation-list-link">SE-0204 Add `last(where:)` and `lastIndex(where:)` Methods</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0205-withUnsafePointer-for-lets.html" class="navigation-list-link">SE-0205 `withUnsafePointer(to:_:)` and `withUnsafeBytes(of:_:)` for immutable values</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0206-hashable-enhancements.html" class="navigation-list-link">SE-0206 Hashable Enhancements</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0207-containsOnly.html" class="navigation-list-link">SE-0207 Add an `allSatisfy` algorithm to `Sequence`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0208-package-manager-system-library-targets.html" class="navigation-list-link">SE-0208 Package Manager System Library Targets</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0209-package-manager-swift-lang-version-update.html" class="navigation-list-link">SE-0209 Package Manager Swift Language Version API Update</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0210-key-path-offset.html" class="navigation-list-link">SE-0210 Add an `offset(of:)` method to `MemoryLayout`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0211-unicode-scalar-properties.html" class="navigation-list-link">SE-0211 Add Unicode Properties to `Unicode.Scalar`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0212-compiler-version-directive.html" class="navigation-list-link">SE-0212 Compiler Version Directive</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0213-literal-init-via-coercion.html" class="navigation-list-link">SE-0213 Literal initialization via coercion</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0214-DictionaryLiteral.html" class="navigation-list-link">SE-0214 Renaming the `DictionaryLiteral` type to `KeyValuePairs`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0215-conform-never-to-hashable-and-equatable.html" class="navigation-list-link">SE-0215 Conform `Never` to `Equatable` and `Hashable`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0216-dynamic-callable.html" class="navigation-list-link">SE-0216 Introduce user-defined dynamically "callable" types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0217-bangbang.html" class="navigation-list-link">SE-0217 Introducing the `!!` "Unwrap or Die" operator to the Swift Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0218-introduce-compact-map-values.html" class="navigation-list-link">SE-0218 Introduce `compactMapValues` to Dictionary</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0219-package-manager-dependency-mirroring.html" class="navigation-list-link">SE-0219 Package Manager Dependency Mirroring</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0220-count-where.html" class="navigation-list-link">SE-0220 `count(where:)`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0221-character-properties.html" class="navigation-list-link">SE-0221 Character Properties</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0222-lazy-compactmap-sequence.html" class="navigation-list-link">SE-0222 Lazy CompactMap Sequence</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0223-array-uninitialized-initializer.html" class="navigation-list-link">SE-0223 Accessing an Array's Uninitialized Buffer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0224-ifswift-lessthan-operator.html" class="navigation-list-link">SE-0224 Support 'less than' operator in compilation conditions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0225-binaryinteger-iseven-isodd-ismultiple.html" class="navigation-list-link">SE-0225 Adding `isMultiple` to `BinaryInteger`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0226-package-manager-target-based-dep-resolution.html" class="navigation-list-link">SE-0226 Package Manager Target Based Dependency Resolution</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0227-identity-keypath.html" class="navigation-list-link">SE-0227 Identity key path</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0228-fix-expressiblebystringinterpolation.html" class="navigation-list-link">SE-0228 Fix `ExpressibleByStringInterpolation`</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/docs/2019-08-26-0229-simd.html" class="navigation-list-link active">SE-0229 SIMD Vectors</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0230-flatten-optional-try.html" class="navigation-list-link">SE-0230 Flatten nested optionals resulting from 'try?'</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0231-optional-iteration.html" class="navigation-list-link">SE-0231 Optional Iteration</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0232-remove-customization-points.html" class="navigation-list-link">SE-0232 Remove Some Customization Points from the Standard Library's `Collection` Hierarchy</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0233-additive-arithmetic-protocol.html" class="navigation-list-link">SE-0233 Make `Numeric` Refine a new `AdditiveArithmetic` Protocol</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0234-remove-sequence-subsequence.html" class="navigation-list-link">SE-0234 Remove `Sequence.SubSequence`</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0235-add-result.html" class="navigation-list-link">SE-0235 Add Result to the Standard Library</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0236-package-manager-platform-deployment-settings.html" class="navigation-list-link">SE-0236 Package Manager Platform Deployment Settings</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0237-contiguous-collection.html" class="navigation-list-link">SE-0237 Introduce `withContiguous{Mutable}StorageIfAvailable` methods</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0238-package-manager-build-settings.html" class="navigation-list-link">SE-0238 Package Manager Target Specific Build Settings</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0239-codable-range.html" class="navigation-list-link">SE-0239 Add Codable conformance to Range types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0240-ordered-collection-diffing.html" class="navigation-list-link">SE-0240 Ordered Collection Diffing</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0241-string-index-explicit-encoding-offset.html" class="navigation-list-link">SE-0241 Deprecate String Index Encoded Offsets</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0242-default-values-memberwise.html" class="navigation-list-link">SE-0242 Synthesize default values for the memberwise initializer</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0243-codepoint-and-character-literals.html" class="navigation-list-link">SE-0243 Integer-convertible character literals</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0244-opaque-result-types.html" class="navigation-list-link">SE-0244 Opaque Result Types</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0245-array-uninitialized-initializer.html" class="navigation-list-link">SE-0245 Add an Array Initializer with Access to Uninitialized Storage</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0246-mathable.html" class="navigation-list-link">SE-0246 Generic Math(s) Functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0247-contiguous-strings.html" class="navigation-list-link">SE-0247 Contiguous Strings</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0248-string-gaps-missing-apis.html" class="navigation-list-link">SE-0248 String Gaps and Missing APIs</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0249-key-path-literal-function-expressions.html" class="navigation-list-link">SE-0249 Key Path Expressions as Functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0250-swift-style-guide-and-formatter.html" class="navigation-list-link">SE-0250 Swift Code Style Guidelines and Formatter</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0251-simd-additions.html" class="navigation-list-link">SE-0251 SIMD additions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0252-keypath-dynamic-member-lookup.html" class="navigation-list-link">SE-0252 Key Path Member Lookup</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0253-callable.html" class="navigation-list-link">SE-0253 Introduce callables </a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0254-static-subscripts.html" class="navigation-list-link">SE-0254 Static and class subscripts</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0255-omit-return.html" class="navigation-list-link">SE-0255 Implicit returns from single-expression functions</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0256-contiguous-collection.html" class="navigation-list-link">SE-0256 Introduce `{Mutable}ContiguousCollection` protocol</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-0257-elide-comma.html" class="navigation-list-link">SE-0257 Eliding commas from multiline expression lists</a></li><li class="navigation-list-item"><a href="http://localhost:4000/docs/2019-08-26-xxxx-synthesize-computed-property.html" class="navigation-list-link"> Feature name</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Swift Evolution List" aria-label="Search Swift Evolution List" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="//github.com/pondok-programmer/swift-evolution-jekyll">Swift Evolution List</a></li> </ul> </div> <div class="page"> <div id="main-content" class="page-content" role="main"> <h1 id="simd-vectors"> <a href="#simd-vectors" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> SIMD Vectors </h1> <ul> <li>Proposal: <a href="0229-simd.md">SE-0229</a></li> <li>Author: <a href="https://github.com/stephentyrone">Stephen Canon</a></li> <li>Review Manager: <a href="https://github.com/airspeedswift">Ben Cohen</a></li> <li>Status: <strong>Implemented (Swift 5)</strong></li> <li>Implementation: <a href="https://github.com/apple/swift/pull/20344">apple/swift#20344</a></li> <li>Decision Notes: <a href="https://forums.swift.org/t/accepted-with-modifications-se-0229-simd/18066">Rationale</a></li> <li>Previous Revisions: <a href="https://github.com/apple/swift-evolution/blob/7e4f09fbe11e412326fe19aa5a6121efecc15b3e/proposals/0229-simd.md">1</a>, <a href="https://github.com/apple/swift-evolution/blob/fb85e6772d181800231e71438c7240507d2f04d9/proposals/0229-simd.md">2</a></li> </ul> <h2 id="introduction"> <a href="#introduction" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Introduction </h2> <p>This proposal would expose a common subset of operations on the SIMD types supported by most processors in the standard library. It is based on Apple’s &lt;simd/simd.h&gt; module, which is used throughout Apple’s platforms as the common currency type for fixed-size vectors and matrices. It is not a complete re-implementation; rather it provides the low-level support needed to import any such library, and tries to make a number of things much nicer in Swift than they are in C or C++.</p> <p>Preliminary Swift-evolution <a href="https://forums.swift.org/t/simd-vector-types/16254/">discussion</a>.</p> <h2 id="motivation"> <a href="#motivation" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Motivation </h2> <h3 id="task-1-simd-programming"> <a href="#task-1-simd-programming" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Task 1: SIMD programming </h3> <p>Essentially every modern CPU has support for <a href="https://en.wikipedia.org/wiki/SIMD">SIMD</a> (“Single Instruction, Multiple Data”) instructions in hardware. Without getting into a long discussion of the architectural details, effective use of these instructions allows 2-10x better performance than is otherwise possible for a large class of data-parallel problems, without incurring the synchronization and data-movement hassles of working with the GPU.</p> <p>Historically, there have been a number of obstacles to taking advantage of this hardware. Four programming models have been commonly used, all of which the author has considerable experience with:</p> <ul> <li>Assembly: this has the advantage that you get exactly the code you want. It has numerous disadvantages–another language to learn, requiring either macro soup or separate implementations for every target (in effectively a different language for each), there are few good learning resources, and you have to slog through all the tedious things that the compiler normally does for you, like allocating registers and getting the calling conventions right (or wrong, in subtle ways that bite your users many years later).</li> <li>Intrinsics: The model historically pushed by hardware vendors. Each architecture has its own set of C “intrinsic” types like <code class="highlighter-rouge">__m128</code> (x86) or <code class="highlighter-rouge">int8x8_t</code> (ARM). These are superficially nicer than assembly, but in practice incur nearly all of the downsides, plus a few additional ones. The biggest problem is that these types are often bolted awkwardly onto the language, and so are incompatible with fundamental language or runtime assumptions about size or alignment. Innumerable bugs have been created by people attempting to use vector intrinsic types together with C++ containers, for example. These types move your implementation into a portable language (C or C++), and then immediately remove that portability by being tied to a specific architecture.</li> <li>“Vector class” libraries: Agner’s is the most well-known. What these generally bring to the table is support for familiar operators rather than arcane intrinsics (e.g. <code class="highlighter-rouge">a + b</code> instead of <code class="highlighter-rouge">_mm_addps(a, b)</code>). Most are narrowly focused on a single architecture (almost always x86, so they still don’t provide real portability). Apple’s &lt;simd/simd.h&gt; is similar to these, but with full support for every architecture that Apple uses, which in practice makes code written against it fairly portable.</li> <li>Autovectorization: works well for simple problems, but no one has yet demonstrated a satisfactory solution for more general tasks. One of several problems is that the underlying machine model assumed by vector code is fundamentally distinct from the underlying machine model that most scalar code is written against, forcing an autovectorizing compiler to map between the two. Historically this was largely done via an ad-hoc set of transformations, which never really worked all that well. Newer approaches show some promise, but explicit manual vectorization is still frequently needed.</li> </ul> <p>A major goal of these new data types in Swift is to provide a <em>better</em> API for vector programming. We want to capture the cross-platform niceties of the &lt;simd/simd.h&gt; module, but also add some new features that were difficult or impossible to do in C; things like enabling generic programming, but also things as simple as a native way to express vector permutations and unaligned loads, or even just conversions between different vector types with the same number of elements (this requires a function call rather than a cast with most vector libraries).</p> <p>Looking ahead, I expect that we will use these primitives to expose things like iterating over vectors extracted from a collection of scalars, to make explicitly vectorized code much more approachable.</p> <h3 id="task-2-geometry-primitives"> <a href="#task-2-geometry-primitives" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Task 2: geometry primitives </h3> <p>There is a large class of computational tasks (graphics and animation, image processing, AR, VR, computer vision) that want to have 2, 3, and 4 dimensional vector and matrix types. For these applications, these types are just as fundamental as <code class="highlighter-rouge">Int</code> and <code class="highlighter-rouge">Array</code> are for “normal” programming–they are the foundation upon which everything else is constructed.</p> <p>These tasks require both elementwise operations, as well as some operations on types as abstract vectors–things like the dot and cross products, vector length, and orientation tests.</p> <h3 id="task-3-gpu-data-structures"> <a href="#task-3-gpu-data-structures" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Task 3: GPU data structures </h3> <p>Closely related to part 2, short vectors are also essential data types for representing GPU data structures. It’s frequently necessary to handle these on the CPU side do do pre/post processing, or data marshalling, and exposing these types in Swift enables that task.</p> <h3 id="putting-it-together"> <a href="#putting-it-together" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Putting it together </h3> <p>Superficially, the only thing that these tasks have in common is that the fundamental types are “homogeneous aggregates”, and that they want to benefit from the SIMD hardware that is available. Two or even three sets of types may seem more appropriate. However, our experience with clients of &lt;simd/simd.h&gt; is that all of our clients use a diverse subset of operations from the module, and that it’s difficult to draw clear boundaries of what belongs where. While it may be reasonable to refine the underlying <em>protocols</em>, the types should probably remain unified.</p> <p>Looking ahead, we would like to enable more sophisticated storage layouts and transforms to and from them, such as SoA - AoS conversion (a fancy way of saying “matrix transpose” or “interleave / deinterleave”; these are all the same thing). Once you start thinking about such transforms, the distinction between these types really goes out the window, because you want to map between things like 16 vectors of 3 floats and 3 vectors of 16 floats.</p> <h2 id="proposed-solution"> <a href="#proposed-solution" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Proposed solution </h2> <p>This proposal adds types like <code class="highlighter-rouge">SIMD2&lt;Int&gt;</code>, <code class="highlighter-rouge">SIMD16&lt;UInt16&gt;</code> etc. to the language, with operations whose semantics map to SIMD types available on most architectures. The full set of types are <code class="highlighter-rouge">SIMD2&lt;T&gt;</code>, <code class="highlighter-rouge">SIMD3&lt;T&gt;</code>, <code class="highlighter-rouge">SIMD4&lt;T&gt;</code>, <code class="highlighter-rouge">SIMD8&lt;T&gt;</code>, <code class="highlighter-rouge">SIMD16&lt;T&gt;</code>, <code class="highlighter-rouge">SIMD32&lt;T&gt;</code>, and <code class="highlighter-rouge">SIMD64&lt;T&gt;</code>, where <code class="highlighter-rouge">T</code> is any type that conforms to the <code class="highlighter-rouge">SIMDScalar</code> protocol (discussed in detail below). All of the standard library integer and floating-point types (except for <code class="highlighter-rouge">Float80</code>) conform to <code class="highlighter-rouge">SIMDScalar</code>.</p> <h2 id="detailed-design"> <a href="#detailed-design" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Detailed design </h2> <p>To support SIMD vectors, a type conforms to the <code class="highlighter-rouge">SIMDScalar</code> protocol:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">SIMDScalar</span> <span class="p">{</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMDMaskScalar</span> <span class="p">:</span> <span class="kt">SIMDScalar</span> <span class="o">&amp;</span> <span class="kt">FixedWidthInteger</span> <span class="o">&amp;</span> <span class="kt">SignedInteger</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMD2Storage</span> <span class="p">:</span> <span class="kt">SIMDStorage</span> <span class="k">where</span> <span class="kt">SIMD2Storage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="o">==</span> <span class="k">Self</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMD4Storage</span> <span class="p">:</span> <span class="kt">SIMDStorage</span> <span class="k">where</span> <span class="kt">SIMD4Storage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="o">==</span> <span class="k">Self</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMD8Storage</span> <span class="p">:</span> <span class="kt">SIMDStorage</span> <span class="k">where</span> <span class="kt">SIMD8Storage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="o">==</span> <span class="k">Self</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMD16Storage</span> <span class="p">:</span> <span class="kt">SIMDStorage</span> <span class="k">where</span> <span class="kt">SIMD16Storage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="o">==</span> <span class="k">Self</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMD32Storage</span> <span class="p">:</span> <span class="kt">SIMDStorage</span> <span class="k">where</span> <span class="kt">SIMD32Storage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="o">==</span> <span class="k">Self</span>
  <span class="kd">associatedtype</span> <span class="kt">SIMD64Storage</span> <span class="p">:</span> <span class="kt">SIMDStorage</span> <span class="k">where</span> <span class="kt">SIMD64Storage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="o">==</span> <span class="k">Self</span>
<span class="p">}</span>
</code></pre></div></div> <p>Let’s leave aside <code class="highlighter-rouge">SIMDMaskScalar</code> for now, and consider the other six <code class="highlighter-rouge">associatedtype</code> requirements. They all have the same form; a type that provides storage for a vector of the designated size with the correct scalar type.</p> <p>The <code class="highlighter-rouge">SIMDStorage</code> protocol is extremely simple:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">SIMDStorage</span> <span class="p">{</span>
  <span class="c1">/// The type of scalars in the vector space.</span>
  <span class="kd">associatedtype</span> <span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">Hashable</span>

  <span class="c1">/// The number of elements in the vector.</span>
  <span class="k">var</span> <span class="nv">scalarCount</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

  <span class="c1">/// A vector with zero or the default value in all lanes.</span>
  <span class="nf">init</span><span class="p">()</span>

  <span class="c1">/// Element access to the vector.</span>
  <span class="nf">subscript</span><span class="p">(</span><span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Scalar</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>This is the bare minimum functionality upon which everything else is built; the expectation is that types conforming to this protocol will wrap LLVM <code class="highlighter-rouge">Builtin</code> vector types, but this is not necessary. Users can conform types to this protocol with any backing storage that can provide the necessary operations, which allows them to benefit from the semantics (and many operations will be autovectorized by the compiler in most cases, even without explicit vector types as storage).</p> <p>The <code class="highlighter-rouge">SIMD</code> protocol refines <code class="highlighter-rouge">SIMDStorage</code>, adding some additional requirements:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">SIMD</span> <span class="p">:</span> <span class="kt">SIMDStorage</span><span class="p">,</span> <span class="kt">Hashable</span><span class="p">,</span> <span class="kt">CustomStringConvertible</span> <span class="p">{</span>
  <span class="kd">associatedtype</span> <span class="kt">MaskStorage</span> <span class="p">:</span> <span class="kt">SIMD</span>
    <span class="k">where</span> <span class="kt">MaskStorage</span><span class="o">.</span><span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">FixedWidthInteger</span> <span class="o">&amp;</span> <span class="kt">SignedInteger</span>
<span class="p">}</span>
</code></pre></div></div> <p>Let’s discuss <code class="highlighter-rouge">Mask</code>s. <code class="highlighter-rouge">SIMD</code>s are <code class="highlighter-rouge">Equatable</code>, so they have the <code class="highlighter-rouge">==</code> and <code class="highlighter-rouge">!=</code> operators, but they also provide the “pointwise comparison” <code class="highlighter-rouge">.==</code> and <code class="highlighter-rouge">.!=</code> operators, which compare the lanes of two vectors, and produce a <code class="highlighter-rouge">Mask</code>, which is a vector of boolean values. Each lane of the mask is either <code class="highlighter-rouge">true</code> or <code class="highlighter-rouge">false</code>, depending on the result of comparing the values in the corresponding lanes. An example:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">swift</span><span class="p">)</span> <span class="k">let</span> <span class="nv">x</span> <span class="o">=</span> <span class="kt">SIMD4</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="c1">// x : SIMD4&lt;Int&gt; = SIMD4&lt;Int&gt;(1, 2, 3, 4)</span>
<span class="p">(</span><span class="n">swift</span><span class="p">)</span> <span class="k">let</span> <span class="nv">y</span> <span class="o">=</span> <span class="kt">SIMD4</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="c1">// y : SIMD4&lt;Int&gt; = SIMD4&lt;Int&gt;(3, 2, 1, 0)</span>
<span class="p">(</span><span class="n">swift</span><span class="p">)</span> <span class="n">x</span> <span class="o">.==</span> <span class="n">y</span>
<span class="c1">// r0 : SIMDMask&lt;SIMD4&lt;Int.SIMDMaskScalar&gt;&gt; = SIMDMask&lt;SIMD4&lt;Int&gt;&gt;(false, true, false, false)</span>
</code></pre></div></div> <p>here, the second lane is <code class="highlighter-rouge">true</code>, because <code class="highlighter-rouge">2 == 2</code>, while all other lanes are false because the elements of <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> in those lanes are not equal.</p> <p>Because of some technical details of how these comparisons happen in SIMD hardware on CPUs, it’s often advantageous to store these vectors-of-bools as vectors-of-ints whose width matches that of the vectors being compared. Because of this, there isn’t a single <code class="highlighter-rouge">SIMD4&lt;Bool&gt;</code> type, but rather a whole family of <code class="highlighter-rouge">SIMDMask&lt;SIMD4&lt;IntN&gt;&gt;</code> types. The <code class="highlighter-rouge">MaskStorage</code> associatedtype on <code class="highlighter-rouge">SIMDScalar</code> allows us to get to the desired mask type from <code class="highlighter-rouge">SIMD4&lt;Scalar&gt;</code>.</p> <p>The concrete <code class="highlighter-rouge">SIMD2&lt;T&gt;</code>, <code class="highlighter-rouge">SIMD3&lt;T&gt;</code>, etc types conform to <code class="highlighter-rouge">SIMD</code>; and almost all of their operations are provided by extensions on the protocol:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">extension</span> <span class="kt">SIMD</span> <span class="p">{</span>
  <span class="c1">/// The valid indices for subscripting the vector.</span>
  <span class="k">var</span> <span class="nv">indices</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Int</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>

  <span class="c1">/// A vector with value in all lanes.</span>
  <span class="nf">init</span><span class="p">(</span><span class="n">repeating</span> <span class="nv">value</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>

  <span class="c1">/// Conformance to Equatable</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">==</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span>

  <span class="c1">/// Conformance to Hashable</span>
  <span class="kd">func</span> <span class="nf">hash</span><span class="p">(</span><span class="n">into</span> <span class="nv">hasher</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">Hasher</span><span class="p">)</span>
  
  <span class="c1">/// Conformance to CustomStringConvertible</span>
  <span class="k">var</span> <span class="nv">description</span><span class="p">:</span> <span class="kt">String</span>
  
  <span class="c1">/// Pointwise equality and inequality</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.==</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.!=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.==</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.!=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.==</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.!=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  
  <span class="c1">/// Replaces elements of this vector with `other` in the lanes where</span>
  <span class="c1">/// `mask` is `true`.</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">replace</span><span class="p">(</span><span class="n">with</span> <span class="nv">other</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="k">where</span> <span class="nv">mask</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span><span class="p">)</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">replace</span><span class="p">(</span><span class="n">with</span> <span class="nv">other</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="k">where</span> <span class="nv">mask</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span><span class="p">)</span>
  <span class="kd">func</span> <span class="nf">replacing</span><span class="p">(</span><span class="n">with</span> <span class="nv">other</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="k">where</span> <span class="nv">mask</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">func</span> <span class="nf">replacing</span><span class="p">(</span><span class="n">with</span> <span class="nv">other</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="k">where</span> <span class="nv">mask</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="c1">/// Initialize from array literal</span>
  <span class="c1">///</span>
  <span class="c1">/// Precondition: the array must have exactly scalarCount elements.</span>
  <span class="nf">init</span><span class="p">(</span><span class="n">arrayLiteral</span> <span class="nv">elements</span><span class="p">:</span> <span class="kt">Scalar</span><span class="o">...</span><span class="p">)</span>
  
  <span class="c1">/// Initialize from sequence</span>
  <span class="c1">///</span>
  <span class="c1">/// Precondition: the sequence must have exactly scalarCount elements.</span>
  <span class="kd">init</span><span class="o">&lt;</span><span class="kt">S</span><span class="p">:</span> <span class="kt">Sequence</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">elements</span><span class="p">:</span> <span class="kt">S</span><span class="p">)</span> <span class="k">where</span> <span class="kt">S</span><span class="o">.</span><span class="kt">Element</span> <span class="o">==</span> <span class="kt">Scalar</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">SIMD</span> <span class="k">where</span> <span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">Comparable</span> <span class="p">{</span>
  <span class="c1">/// Pointwise ordered comparisons</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&lt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&lt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&gt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span> 
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&lt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&lt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&gt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span> 
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&lt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&lt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&gt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span><span class="o">&lt;</span><span class="kt">MaskStorage</span><span class="o">&gt;</span> 
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">SIMDMask</span> <span class="p">{</span>
  <span class="c1">/// Boolean operations on Masks; these use the .-prefixed form because</span>
  <span class="c1">/// they do not short-circuit like `&amp;&amp;` and `||`, but the normal</span>
  <span class="c1">/// boolean operators have the wrong precedence for the typical use</span>
  <span class="c1">/// of these operators.</span>
  <span class="kd">static</span> <span class="k">prefix</span> <span class="kd">func</span> <span class="o">.!</span><span class="p">(</span><span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&amp;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.^</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.|</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&amp;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.^</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.|</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&amp;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.^</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.|</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&amp;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.^=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.|=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">SIMDMask</span><span class="p">)</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.&amp;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.^=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">.|=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">SIMDMask</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="n">random</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">RandomNumberGenerator</span><span class="o">&gt;</span><span class="p">(</span><span class="n">using</span> <span class="nv">generator</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">T</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">random</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">SIMDMask</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">SIMD</span> <span class="k">where</span> <span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">FixedWidthInteger</span> <span class="p">{</span>

  <span class="kd">static</span> <span class="k">var</span> <span class="nv">zero</span><span class="p">:</span> <span class="k">Self</span>
  <span class="k">var</span> <span class="nv">leadingZeroBitCount</span><span class="p">:</span> <span class="k">Self</span>
  <span class="k">var</span> <span class="nv">trailingZeroBitCount</span><span class="p">:</span> <span class="k">Self</span>
  <span class="k">var</span> <span class="nv">nonzeroBitCount</span><span class="p">:</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="k">prefix</span> <span class="kd">func</span> <span class="o">~</span><span class="p">(</span><span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">^</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">|</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&lt;&lt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&gt;&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;+</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;-</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;*</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">%</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">^</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">|</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&lt;&lt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&gt;&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;+</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;-</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;*</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">%</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">^</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">|</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&lt;&lt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&gt;&gt;</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;+</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;-</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;*</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">%</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">^=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">|=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&lt;&lt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&gt;&gt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;+=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;-=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;*=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">%=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">^=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">|=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&lt;&lt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;&gt;&gt;=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;+=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;-=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">&amp;*=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> 
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">%=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="n">random</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">RandomNumberGenerator</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">using</span> <span class="nv">generator</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">T</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">random</span><span class="p">(</span><span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="n">random</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">RandomNumberGenerator</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">ClosedRange</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">using</span> <span class="nv">generator</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">T</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">random</span><span class="p">(</span><span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">ClosedRange</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">SIMD</span> <span class="k">where</span> <span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">FloatingPoint</span> <span class="p">{</span>

  <span class="kd">static</span> <span class="k">var</span> <span class="nv">zero</span><span class="p">:</span> <span class="k">Self</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="o">+</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">-</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">*</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="o">+</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">-</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">*</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="o">+</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">-</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">*</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="o">+=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">-=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">*=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="o">+=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">-=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">*=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  <span class="kd">static</span> <span class="kd">func</span> <span class="o">/=</span><span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="k">inout</span> <span class="k">Self</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>

  <span class="kd">func</span> <span class="nf">addingProduct</span><span class="p">(</span><span class="n">_</span> <span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="n">_</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">func</span> <span class="nf">addingProduct</span><span class="p">(</span><span class="n">_</span> <span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="n">_</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="kd">func</span> <span class="nf">addingProduct</span><span class="p">(</span><span class="n">_</span> <span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="n">_</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">addProduct</span><span class="p">(</span><span class="n">_</span> <span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="n">_</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">addProduct</span><span class="p">(</span><span class="n">_</span> <span class="nv">lhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="n">_</span> <span class="nv">rhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">)</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">addProduct</span><span class="p">(</span><span class="n">_</span> <span class="nv">lhs</span><span class="p">:</span> <span class="k">Self</span><span class="p">,</span> <span class="n">_</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span>
  
  <span class="kd">func</span> <span class="nf">squareRoot</span><span class="p">(</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">formSquareRoot</span><span class="p">(</span> <span class="p">)</span>
  
  <span class="kd">func</span> <span class="nf">rounded</span><span class="p">(</span><span class="n">_</span> <span class="nv">rule</span><span class="p">:</span> <span class="kt">FloatingPointRoundingRule</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  <span class="k">mutating</span> <span class="kd">func</span> <span class="nf">round</span><span class="p">(</span><span class="n">_</span> <span class="nv">rule</span><span class="p">:</span> <span class="kt">FloatingPointRoundingRule</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">public</span> <span class="kd">extension</span> <span class="kt">SIMD</span> <span class="k">where</span> <span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">BinaryFloatingPoint</span><span class="p">,</span>
                   <span class="kt">Scalar</span><span class="o">.</span><span class="kt">RawSignificand</span> <span class="p">:</span> <span class="kt">FixedWidthInteger</span> <span class="p">{</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="n">random</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">RandomNumberGenerator</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">using</span> <span class="nv">generator</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">T</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
  
  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">random</span><span class="p">(</span><span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">Range</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="n">random</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">RandomNumberGenerator</span><span class="o">&gt;</span><span class="p">(</span>
    <span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">ClosedRange</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="n">using</span> <span class="nv">generator</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">T</span>
  <span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>

  <span class="kd">static</span> <span class="kd">func</span> <span class="nf">random</span><span class="p">(</span><span class="k">in</span> <span class="nv">range</span><span class="p">:</span> <span class="kt">ClosedRange</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span>
<span class="p">}</span>
</code></pre></div></div> <p>As you can see, this is a fairly huge API.</p> <p>These operations are mostly implemented in terms of each other; the base operations are implemented as for-loops over the elements of the vector. Most of these are already auto- vectorized by the compiler when optimization is enabled, but this will not be the full long- term solution. Instead, they will be annotated with <code class="highlighter-rouge">@_semantics</code> to allow them to be lowered to special SIL nodes and from there to the corresponding LLVM IR vector nodes so that we can guarantee vector codegen always occurs. This optimization work does not effect the <em>semantics</em> of the operations at the Swift language level, so it will happen over the next few months as bug fixes.</p> <p>After all that, the actual machinery of the concrete types is pretty boring:</p> <div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">struct</span> <span class="kt">SIMD4</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span> <span class="p">:</span> <span class="kt">SIMD</span>
                 <span class="k">where</span> <span class="kt">Scalar</span> <span class="p">:</span> <span class="kt">SIMDScalar</span> <span class="p">{</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">_storage</span><span class="p">:</span> <span class="kt">Scalar</span><span class="o">.</span><span class="kt">SIMD4Storage</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">scalarCount</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">4</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span> <span class="n">_storage</span> <span class="o">=</span> <span class="kt">Scalar</span><span class="o">.</span><span class="kt">SIMD4Storage</span><span class="p">()</span> <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">subscript</span><span class="p">(</span><span class="nv">index</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Scalar</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="nf">_precondition</span><span class="p">(</span><span class="n">indices</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
      <span class="k">return</span> <span class="n">_storage</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span>
      <span class="nf">_precondition</span><span class="p">(</span><span class="n">indices</span><span class="o">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
      <span class="n">_storage</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">init</span><span class="p">(</span><span class="n">_</span> <span class="nv">v0</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="n">_</span> <span class="nv">v1</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="n">_</span> <span class="nv">v2</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="n">_</span> <span class="nv">v3</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="k">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">v0</span>
    <span class="k">self</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">v1</span>
    <span class="k">self</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">v2</span>
    <span class="k">self</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">v3</span>
  <span class="p">}</span>
  
  <span class="kd">public</span> <span class="nf">init</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">z</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">,</span> <span class="nv">w</span><span class="p">:</span> <span class="kt">Scalar</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Scalar</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="k">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Scalar</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="k">self</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">z</span><span class="p">:</span> <span class="kt">Scalar</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="k">self</span><span class="p">[</span><span class="mi">2</span><span class="p">]}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">w</span><span class="p">:</span> <span class="kt">Scalar</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span> <span class="k">return</span> <span class="k">self</span><span class="p">[</span><span class="mi">3</span><span class="p">]}</span>
    <span class="k">set</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span> <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="nf">init</span><span class="p">(</span><span class="nv">lowHalf</span><span class="p">:</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">,</span> <span class="nv">highHalf</span><span class="p">:</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="n">lowHalf</span> <span class="o">=</span> <span class="n">lowHalf</span>
    <span class="k">self</span><span class="o">.</span><span class="n">highHalf</span> <span class="o">=</span> <span class="n">highHalf</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">lowHalf</span><span class="p">:</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">result</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">newValue</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">highHalf</span><span class="p">:</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">result</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">self</span><span class="p">[</span><span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">newValue</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mi">2</span><span class="o">+</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">evenHalf</span><span class="p">:</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">result</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">self</span><span class="p">[</span><span class="mf">2*</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">newValue</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mf">2*</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">public</span> <span class="k">var</span> <span class="nv">oddHalf</span><span class="p">:</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">get</span> <span class="p">{</span>
      <span class="k">var</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">SIMD2</span><span class="o">&lt;</span><span class="kt">Scalar</span><span class="o">&gt;</span><span class="p">()</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">result</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="n">result</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">self</span><span class="p">[</span><span class="mf">2*</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">}</span>
      <span class="k">return</span> <span class="n">result</span>
    <span class="p">}</span>
    <span class="k">set</span> <span class="p">{</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">newValue</span><span class="o">.</span><span class="n">indices</span> <span class="p">{</span> <span class="k">self</span><span class="p">[</span><span class="mf">2*</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>Beyond the new Swift API for vector types, there’s an accompanying change to the clang importer that will allow C functions and structures using vector types to be imported. When we find a “clang extended vector type” or “extvector” whose underlying scalar type is imported as a <code class="highlighter-rouge">SIMDScalar</code> type in the standard library and whose element count is 2, 3, 4, 8, 16, 32, or 64, we’ll import it as the correponding standard library vector type.</p> <h2 id="source-compatibility"> <a href="#source-compatibility" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Source compatibility </h2> <p>No source compatibility changes.</p> <h2 id="effect-on-abi-stability"> <a href="#effect-on-abi-stability" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Effect on ABI stability </h2> <p>No effects on ABI stability at the language level. There are some minor changes around how the &lt;simd/simd.h&gt; types are imported on Apple platforms, but these will have no effect on source compatibility; they only may tweak some low-level ABI details.</p> <h2 id="effect-on-api-resilience"> <a href="#effect-on-api-resilience" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Effect on API resilience </h2> <p>Because these are entirely new types, they come with a large set of API that will become part of the standard library interface. New API can be added in the future, including to protocols, because it is generally possible to provide good default implementations for simd operations.</p> <h2 id="alternatives-considered"> <a href="#alternatives-considered" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Alternatives considered </h2> <p>The main alternative is “don’t do anything, let people write structs, and trust the autovectorizer.” This might even mostly work, but even if it worked flawlessly (which it doesn’t today), you would be left with the problem that these types are common, and everyone would be using their own set of structs, with slightly incompatible size and alignment or operations provided. Even when the layout matches up, you would still need to provide conversion shims between each and every library you work with. There is a lot of merit in providing a single ground-truth for low-level vectors in the stdlib, over which libraries and programs can build additional operations.</p> <h3 id="notes-from-pre-review-discussion"> <a href="#notes-from-pre-review-discussion" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Notes from pre-review discussion: </h3> <ol> <li> <p>I have added a static <code class="highlighter-rouge">.zero</code> property to integer and floating point vectors based on email conversation with Rick Roe. This is a departure from scalar numeric types, but he convinced me that these are good to have as an explicit alternative to <code class="highlighter-rouge">T()</code>.</p> </li> <li> <p>As mentioned above, <code class="highlighter-rouge">.</code>-prefixes have been added to some elementwise operations. I see pretty good arguments both in favor of and against this change. I think that it largely comes down to a matter of taste. There are two reasonable alternative positions here. (a) don’t add the prefixes; this makes type checking a little more complex. (b) add <code class="highlighter-rouge">.</code>-prefixes to <em>all</em> lanewise operations; this adds a lot of new operators and a fair bit of noise, but there’s reasonable precedent for it as well (julialang).</p> </li> <li> <p>Richard Wei has argued strongly against the spelling of <code class="highlighter-rouge">replacing(with: where:)</code>, objecting to both the lack of an explicit object of the verb <code class="highlighter-rouge">replacing</code> and to the use of <code class="highlighter-rouge">where:</code> as a label for an argument that is not a predicate function. I am not ignoring his concerns, but from a pragmatic point of view, I believe that the fact that this operates on elements is implicit, and <code class="highlighter-rouge">where:</code> simply reads more clearly (to me and the other people that I surveyed) than any other option we could come up with.</p> </li> </ol> <h2 id="changelog"> <a href="#changelog" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Changelog: </h2> <ol> <li> <p>The first version of this proposal used the <code class="highlighter-rouge">&lt;</code>, <code class="highlighter-rouge">&lt;=</code>, <code class="highlighter-rouge">&gt;=</code>, and <code class="highlighter-rouge">&gt;</code> operators. These have been replaced with the <code class="highlighter-rouge">.</code>-prefixed operators.</p> </li> <li> <p>The first version of this proposal used <code class="highlighter-rouge">.*</code> and <code class="highlighter-rouge">.&amp;*</code> for elementwise multiplication; these have been replaced with the “normal” arithmetic operations, matching <code class="highlighter-rouge">+</code>, <code class="highlighter-rouge">-</code>, <code class="highlighter-rouge">/</code>, and <code class="highlighter-rouge">%</code>.</p> </li> <li> <p>We have adopted <code class="highlighter-rouge">.|</code>, <code class="highlighter-rouge">.&amp;</code>, etc on the principle that <code class="highlighter-rouge">.</code>-prefixed operators are “pointwise”.</p> </li> <li> <p>An earlier version of this proposal used names of the form <code class="highlighter-rouge">Float.Vector4</code> instead of <code class="highlighter-rouge">Vector4&lt;Float&gt;</code>. The core team feels that the latter name is a better direction to take.</p> </li> <li> <p>We have removed several operations whose naming was not totally satisfactory. We expect to add those operations and more in future additive proposals; only the types are necessary for ABI stability.</p> </li> <li> <p>Updates based on discussion on Swift-Evolution and with core team: I have eliminated <code class="highlighter-rouge">_</code>-prefixed protocol requirements, to make it somewhat more obvious how user types can be made to conform. This required some renaming to make the function of these associatedtypes more clear. I have also systematically removed <code class="highlighter-rouge">Vector</code> from the naming scheme, in order to remove confusion with C++-style vectors or “mathematical” vector structures that might be added at some future point. The resulting names are generally shorter, which is an nice benefit, and they now have a uniform <code class="highlighter-rouge">SIMD</code> prefix.</p> </li> </ol> <p>Protocols renamed:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Old name</th> <th>New name</th> </tr> </thead> <tbody> <tr> <td><code class="highlighter-rouge">SIMDVector</code></td> <td><code class="highlighter-rouge">SIMD</code></td> </tr> <tr> <td><code class="highlighter-rouge">SIMDVectorizable</code></td> <td><code class="highlighter-rouge">SIMDScalar</code></td> </tr> <tr> <td><code class="highlighter-rouge">SIMDVectorStorage</code></td> <td><code class="highlighter-rouge">SIMDStorage</code></td> </tr> <tr> <td><code class="highlighter-rouge">SIMDMaskVector</code></td> <td>N/A*</td> </tr> </tbody> </table></div> <p>Associated types renamed:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Old name</th> <th>New name</th> </tr> </thead> <tbody> <tr> <td><code class="highlighter-rouge">Element</code></td> <td><code class="highlighter-rouge">Scalar</code></td> </tr> <tr> <td><code class="highlighter-rouge">_MaskElement</code></td> <td><code class="highlighter-rouge">SIMDMaskScalar</code></td> </tr> <tr> <td><code class="highlighter-rouge">_Vector${n}</code></td> <td><code class="highlighter-rouge">SIMD${n}Storage</code></td> </tr> <tr> <td><code class="highlighter-rouge">Mask</code></td> <td>N/A*</td> </tr> <tr> <td>N/A*</td> <td><code class="highlighter-rouge">MaskStorage</code></td> </tr> </tbody> </table></div> <p>Concrete types renamed:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Old name</th> <th>New name</th> </tr> </thead> <tbody> <tr> <td><code class="highlighter-rouge">Vector2&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD2&lt;Scalar&gt;</code></td> </tr> <tr> <td><code class="highlighter-rouge">Vector3&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD3&lt;Scalar&gt;</code></td> </tr> <tr> <td><code class="highlighter-rouge">Vector4&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD4&lt;Scalar&gt;</code></td> </tr> <tr> <td><code class="highlighter-rouge">Vector8&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD8&lt;Scalar&gt;</code></td> </tr> <tr> <td><code class="highlighter-rouge">Vector16&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD16&lt;Scalar&gt;</code></td> </tr> <tr> <td><code class="highlighter-rouge">Vector32&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD32&lt;Scalar&gt;</code></td> </tr> <tr> <td><code class="highlighter-rouge">Vector64&lt;Scalar&gt;</code></td> <td><code class="highlighter-rouge">SIMD64&lt;Scalar&gt;</code></td> </tr> <tr> <td>N/A*</td> <td><code class="highlighter-rouge">SIMDMask&lt;Storage&gt;</code></td> </tr> </tbody> </table></div> <p>(*) The way in which masks are implemented has also been simplified somewhat, which allowed me to eliminate the <code class="highlighter-rouge">SIMDMaskVector</code> protocol entirely.</p> </div> </div> </div> </div> </body> </html>
